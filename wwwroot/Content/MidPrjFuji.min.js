(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;b=a.MidPrjFuji=a.MidPrjFuji||{};c=b.App=b.App||{};d=a.WebSharper=a.WebSharper||{};e=d.Arrays=d.Arrays||{};f=d.Operators=d.Operators||{};g=d.Obj=d.Obj||{};h=d.UI=d.UI||{};i=h.Templating=h.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.ProviderBuilder=k.ProviderBuilder||{};m=h.TemplateHole=h.TemplateHole||{};n=h.Var=h.Var||{};o=b.Pages=b.Pages||{};p=d.Charting=d.Charting||{};q=p.Renderers=p.Renderers||{};r=q.ChartJs=q.ChartJs||{};s=p.Chart=p.Chart||{};t=p.Charts=p.Charts||{};u=t.BarChart=t.BarChart||{};v=p.Pervasives=p.Pervasives||{};w=v.Color=v.Color||{};x=h.View=h.View||{};y=k.TemplateInstance=k.TemplateInstance||{};z=h.TemplateHoleModule=h.TemplateHoleModule||{};A=z.Elt=z.Elt||{};B=z.Text=z.Text||{};C=d.Unchecked=d.Unchecked||{};D=a.System=a.System||{};E=D.Guid=D.Guid||{};F=a.StartupCode$MidPrjFuji$Client=a.StartupCode$MidPrjFuji$Client||{};G=q.ChartJsInternal=q.ChartJsInternal||{};H=h.Client=h.Client||{};I=H.Templates=H.Templates||{};J=h.Doc=h.Doc||{};K=d.JavaScript=d.JavaScript||{};L=K.Pervasives=K.Pervasives||{};M=t.CompositeChart=t.CompositeChart||{};N=a.Object;O=d.Numeric=d.Numeric||{};P=h.ListModel=h.ListModel||{};Q=a.MidPrjFuji_Templates=a.MidPrjFuji_Templates||{};R=a.MidPrjFuji_Router=a.MidPrjFuji_Router||{};S=k.Handler=k.Handler||{};T=a.EventTarget;U=a.Node;V=a.WindowOrWorkerGlobalScope;W=K.JS=K.JS||{};X=h.Var$1=h.Var$1||{};Y=h.Router=h.Router||{};Z=d.Seq=d.Seq||{};_0=a.ADataSet;_1=t.ChartConfig=t.ChartConfig||{};_2=t.SeriesChartConfig=t.SeriesChartConfig||{};_3=a.StartupCode$WebSharper_Charting$Renderers=a.StartupCode$WebSharper_Charting$Renderers||{};_4=d.Collections=d.Collections||{};_5=_4.Dictionary=_4.Dictionary||{};_6=d.Control=d.Control||{};_7=_6.FSharpEvent=_6.FSharpEvent||{};_8=a.StartupCode$WebSharper_Charting$Charts=a.StartupCode$WebSharper_Charting$Charts||{};_9=h.Snap=h.Snap||{};_=z.VarStr=z.VarStr||{};$=z.EventQ=z.EventQ||{};ba=h.Docs=h.Docs||{};bb=_4.HashSet=_4.HashSet||{};bc=k.TemplateInitializer=k.TemplateInitializer||{};bd=z.VarFloatUnchecked=z.VarFloatUnchecked||{};be=z.VarBool=z.VarBool||{};bf=z.VarDateTime=z.VarDateTime||{};bg=z.VarFile=z.VarFile||{};bh=z.VarDomElement=z.VarDomElement||{};bi=h.ConcreteVar=h.ConcreteVar||{};bj=d.Sitelets=d.Sitelets||{};bk=bj.RouterOperators=bj.RouterOperators||{};bl=bj.RouterModule=bj.RouterModule||{};bm=bj.Route=bj.Route||{};bn=h.HtmlModule=h.HtmlModule||{};bo=bn.attr=bn.attr||{};bp=h.AttrModule=h.AttrModule||{};bq=a.Element;br=a.HTMLElement;bs=d.Enumerator=d.Enumerator||{};bt=bs.T=bs.T||{};bu=d.Option=d.Option||{};bv=d.Slice=d.Slice||{};bw=G.BatchUpdater=G.BatchUpdater||{};bx=d.Util=d.Util||{};by=v.Seq=v.Seq||{};bz=p.Reactive=p.Reactive||{};bA=v.Reactive=v.Reactive||{};bB=d.List=d.List||{};bC=bB.T=bB.T||{};bD=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bE=_6.Event=_6.Event||{};bF=bE.Event=bE.Event||{};bG=t.ColorConfig=t.ColorConfig||{};bH=d.Random=d.Random||{};bI=t.PolarData=t.PolarData||{};bJ=_4.DictionaryUtil=_4.DictionaryUtil||{};bK=h.Abbrev=h.Abbrev||{};bL=bK.Fresh=bK.Fresh||{};bM=h.Storage=h.Storage||{};bN=bj.Router=bj.Router||{};bO=bj.List=bj.List||{};bP=h.AttrProxy=h.AttrProxy||{};bQ=h.Attrs=h.Attrs||{};bR=h.DomUtility=h.DomUtility||{};bS=I.Prepare=I.Prepare||{};bT=_4.KeyCollection=_4.KeyCollection||{};bU=h.DocElemNode=h.DocElemNode||{};bV=a.CharacterData;bW=a.Blob;bX=h.Elt=h.Elt||{};bY=h.An=h.An||{};bZ=H.Settings=H.Settings||{};b0=bK.Mailbox=bK.Mailbox||{};b1=bM.ArrayStorage=bM.ArrayStorage||{};b2=_4.FSharpMap=_4.FSharpMap||{};b3=_4.Map=_4.Map||{};b4=d.Strings=d.Strings||{};b5=d.Utils=d.Utils||{};b6=d.Concurrency=d.Concurrency||{};b7=H.Attrs=H.Attrs||{};b8=b7.Dyn=b7.Dyn||{};b9=z.Attribute=z.Attribute||{};b_=z.Event=z.Event||{};b$=z.AfterRender=z.AfterRender||{};ca=z.AfterRenderQ=z.AfterRenderQ||{};cb=h.Array=h.Array||{};cc=h.Updates=h.Updates||{};cd=_4.ValueCollection=_4.ValueCollection||{};ce=H.Docs=H.Docs||{};cf=ce.RunState=ce.RunState||{};cg=ce.NodeSet=ce.NodeSet||{};ch=h.Anims=h.Anims||{};ci=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cj=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};ck=_4.BalancedTree=_4.BalancedTree||{};cl=ck.Tree=ck.Tree||{};cm=_4.Pair=_4.Pair||{};cn=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};co=d.Queue=d.Queue||{};cp=_4.HashSetUtil=_4.HashSetUtil||{};cq=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cr=h.AppendList=h.AppendList||{};cs=_4.MapUtil=_4.MapUtil||{};ct=b6.Scheduler=b6.Scheduler||{};cu=bj.PathUtil=bj.PathUtil||{};cv=a.Error;cw=d.KeyNotFoundException=d.KeyNotFoundException||{};cx=h.DynamicAttrNode=h.DynamicAttrNode||{};cy=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cz=h.Easing=h.Easing||{};cA=b6.AsyncBody=b6.AsyncBody||{};cB=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};cC=b6.CT=b6.CT||{};cD=bK.HashSet=bK.HashSet||{};cE=h.BindVar=h.BindVar||{};cF=h.String=h.String||{};cG=h.CheckedInput=h.CheckedInput||{};cH=d.CancellationTokenSource=d.CancellationTokenSource||{};cI=ce.DomNodes=ce.DomNodes||{};cJ=d.Char=d.Char||{};cK=d.DateUtil=d.DateUtil||{};cL=d.OperationCanceledException=d.OperationCanceledException||{};cM=d.Lazy=d.Lazy||{};cN=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cO=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};cP=cO.LazyRecord=cO.LazyRecord||{};cQ=a.Math;cR=d&&d.Runtime;cS=a.console;cT=a.Date;c.Main=function(){var cU,cV,cW,cX,cY,cZ,c0;cU=(cV=J.EmbedView(x.Map(function(c1){return c1.$==1?o.Page1():o.HomePage();},c.currentPage().get_View())),(cW=(cX=(cY=new l.New$1(),(cY.h.push(new B.New("url_home","/")),cY)),(cX.h.push(new B.New("url_page1","/#/page1")),cX)),(cW.h.push(new A.New("maincontainer",cV)),cW)));cZ=S.CompleteHoles(cU.k,cU.h,[]);cU.i=new y.New(cZ[1],I.RunFullDocTemplate(cZ[0]));o.counter().Get();c0=r.Render$1(s.Combine([s.Bar$1(e.zip(["January","Febrary","March","April","You"],[250000,260000,290000,300000,0])).__WithFillColor(new w({$:0,$0:151,$1:187,$2:205,$3:0.2})).__WithStrokeColor(new w({$:2,$0:"blue"}))]),{$:1,$0:{$:0,$0:600,$1:300}},null,null);I.LoadLocalTemplates("");J.RunAppendById("Chart1",c0);};c.currentPage=function(){F.$cctor();return F.currentPage;};c.router=function(){F.$cctor();return F.router;};e.get=function(cU,cV){e.checkBounds(cU,cV);return cU[cV];};e.checkBounds=function(cU,cV){if(cV<0||cV>=cU.length)f.FailWith("Index was outside the bounds of the array.");};e.set=function(cU,cV,cW){e.checkBounds(cU,cV);cU[cV]=cW;};e.length=function(cU){return cU.dims===2?cU.length*cU.length:cU.length;};f.toInt=function(cU){var cV;cV=f.toUInt(cU);return cV>=2147483648?cV-4294967296:cV;};f.FailWith=function(cU){throw new cv(cU);};f.toUInt=function(cU){return(cU<0?cQ.ceil(cU):cQ.floor(cU))>>>0;};f.range=function(cU,cV){var cW;cW=1+cV-cU;return cW<=0?[]:Z.init(cW,function(cX){return cX+cU;});};f.KeyValue=function(cU){return[cU.K,cU.V];};g=d.Obj=cR.Class({Equals:function(cU){return this===cU;},GetHashCode:function(){return -1;}},null,g);g.New=cR.Ctor(function(){},g);l=k.ProviderBuilder=cR.Class({},g,l);l.New$1=cR.Ctor(function(){var cU;g.New.call(this);this.i=null;this.k=(cU=E.NewGuid(),a.String(cU));this.h=cR.MarkResizable([]);cR.SetOptional(this,"s",null);},l);m=h.TemplateHole=cR.Class({ForTextView:function(){cS.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(cU,cV){cS.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){cS.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},g,m);m.New=cR.Ctor(function(){g.New.call(this);},m);n=h.Var=cR.Class({},g,n);n.New=cR.Ctor(function(){g.New.call(this);},n);o.counter=function(){F.$cctor();return F.counter;};o.Page1=function(){var cU,cV,cW,cX,cY,cZ;function c0(c1,c2){var c3,c4,c5,c6,c7;return(c3=(c4=(c5=new l.New$1(),(c5.h.push(new B.New("company",c1)),c5)),(c4.h.push(new B.New("price",c2)),c4)),(c6=S.CompleteHoles(c3.k,c3.h,[]),(c7=new y.New(c6[1],Q.listitem2(c6[0])),c3.i=c7,c7))).get_Doc();}return(cU=(cV=(cW=J.Convert(function(c1){return c0(c1[0],c1[1]);},o.Stock().v),(cX=new l.New$1(),(cX.h.push(new A.New("listcontainer2",cW)),cX))),(cV.h.push(new _.New("company",o.newCompany())),cV)),(cY=S.CompleteHoles(cU.k,cU.h,[["company",0,null]]),(cZ=new y.New(cY[1],Q.page1(cY[0])),cU.i=cZ,cZ))).get_Doc();};o.HomePage=function(){var cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3;function c4(c5,c6,c7,c8,c9){var c_,c$,da,db,dc,dd,de,df;return(c_=(c$=(da=(db=(dc=(dd=new l.New$1(),(dd.h.push(new B.New("month",c5)),dd)),(dc.h.push(new B.New("salary",c6)),dc)),(db.h.push(new B.New("utility",c7)),db)),(da.h.push(new B.New("food",c8)),da)),(c$.h.push(new B.New("balance",c9)),c$)),(de=S.CompleteHoles(c_.k,c_.h,[]),(df=new y.New(de[1],Q.listitem(de[0])),c_.i=df,df))).get_Doc();}return(cU=(cV=(cW=(cX=(cY=(cZ=(c0=J.Convert(function(c5){return c4(c5[0],c5[1],c5[2],c5[3],c5[4]);},o.Balance().v),(c1=new l.New$1(),(c1.h.push(new A.New("listcontainer",c0)),c1))),(cZ.h.push(new _.New("month",o.newMonth())),cZ)),(cY.h.push(new _.New("salary",o.newSalary())),cY)),(cX.h.push(new _.New("utility",o.newUtility())),cX)),(cW.h.push(new _.New("food",o.newFood())),cW)),(cV.h.push(S.EventQ2(cV.k,"add",function(){return cV.i;},function(){var c5,c6,c7;c5=f.toInt(a.Number(o.newSalary().Get()))-f.toInt(a.Number(o.newUtility().Get()))-f.toInt(a.Number(o.newFood().Get()));o.newBalance().Set(a.String(c5));o.Balance().Append([o.newMonth().Get(),o.newSalary().Get(),o.newUtility().Get(),o.newFood().Get(),o.newBalance().Get()]);c6=s.Combine([s.Bar$1(e.zip(["January","Febrary","March","April",o.newMonth().Get()],[250000,260000,290000,300000,f.toInt(a.Number(o.newBalance().Get()))])).__WithFillColor(new w({$:0,$0:151,$1:187,$2:205,$3:0.2})).__WithStrokeColor(new w({$:2,$0:"blue"}))]);self.document.getElementById("Chart1").innerHTML="";c7=r.Render$1(c6,{$:1,$0:{$:0,$0:600,$1:300}},null,null);I.LoadLocalTemplates("");J.RunAppendById("Chart1",c7);})),cV)),(c2=S.CompleteHoles(cU.k,cU.h,[["month",0,null],["salary",0,null],["utility",0,null],["food",0,null]]),(c3=new y.New(c2[1],Q.homepage(c2[0])),cU.i=c3,c3))).get_Doc();};o.newCompany=function(){F.$cctor();return F.newCompany;};o.Stock=function(){F.$cctor();return F.Stock;};o.newFood=function(){F.$cctor();return F.newFood;};o.newUtility=function(){F.$cctor();return F.newUtility;};o.newSalary=function(){F.$cctor();return F.newSalary;};o.newMonth=function(){F.$cctor();return F.newMonth;};o.Balance=function(){F.$cctor();return F.Balance;};o.newBalance=function(){F.$cctor();return F.newBalance;};o.strage=function(){F.$cctor();return F.strage;};r.Render$1=function(cU,cV,cW,cX){var cY;return G.RenderCombinedBarChart(cU,(cY=q.defaultSize(),cV==null?cY:cV.$0),cW,cX);};s.Combine=function(cU){return new M.New(cU);};s.Bar$1=function(cU){return new u.New({$:0,$0:cU},t.defaultChartConfig(),t.defaultSeriesChartConfig());};u=t.BarChart=cR.Class({__WithStrokeColor:function(cU){return this.cst(this).WebSharper_Charting_Charts_ISeriesChart_1$WithStrokeColor(cU);},__WithFillColor:function(cU){return this.cst(this).WebSharper_Charting_Charts_ISeriesChart_1$WithFillColor(cU);},cst:a.id,get__Config:function(){return this.cst(this).WebSharper_Charting_Charts_IChart_1$get_Config();},get__SeriesConfig:function(){return this.cst(this).WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig();},get_DataSet:function(){return this.dataset;},WebSharper_Charting_Charts_ISeriesChart_1$WithStrokeColor:function(cU){var cV;return new u.New(this.dataset,this.cfg,(cV=this.scfg,_2.New(cV.XAxis,cV.YAxis,cV.FillColor,cU,cV.IsFilled)));},WebSharper_Charting_Charts_ISeriesChart_1$WithFillColor:function(cU){var cV;return new u.New(this.dataset,this.cfg,(cV=this.scfg,_2.New(cV.XAxis,cV.YAxis,cU,cV.StrokeColor,cV.IsFilled)));},WebSharper_Charting_Charts_IChart_1$get_Config:function(){return this.cfg;},WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig:function(){return this.scfg;},WebSharper_Charting_Charts_IMutableChart_2$OnUpdate:function(cU){this.event.event.Subscribe(bx.observer(cU));}},g,u);u.New=cR.Ctor(function(cU,cV,cW){g.New.call(this);this.dataset=cU;this.cfg=cV;this.scfg=cW;this.event=new _7.New();},u);e.zip=function(cU,cV){var cW,cX,cY;e.checkLength(cU,cV);cW=e.create(cU.length,null);for(cX=0,cY=cU.length-1;cX<=cY;cX++)cW[cX]=[cU[cX],cV[cX]];return cW;};e.checkLength=function(cU,cV){if(cU.length!==cV.length)f.FailWith("The arrays have different lengths.");};e.map=function(cU,cV){var cW,cX,cY;cW=new a.Array(cV.length);for(cX=0,cY=cV.length-1;cX<=cY;cX++)cW[cX]=cU(cV[cX]);return cW;};e.iter=function(cU,cV){var cW,cX;for(cW=0,cX=cV.length-1;cW<=cX;cW++)cU(cV[cW]);};e.iteri=function(cU,cV){var cW,cX;for(cW=0,cX=cV.length-1;cW<=cX;cW++)cU(cW,cV[cW]);};e.create=function(cU,cV){var cW,cX,cY;cW=new a.Array(cU);for(cX=0,cY=cU-1;cX<=cY;cX++)cW[cX]=cV;return cW;};e.choose=function(cU,cV){var cW,cX,cY,cZ;cW=[];for(cX=0,cY=cV.length-1;cX<=cY;cX++){cZ=cU(cV[cX]);if(cZ==null);else cW.push(cZ.$0);}return cW;};e.ofSeq=function(cU){var cV,cW;if(cU instanceof a.Array)return cU.slice();else if(cU instanceof bC)return e.ofList(cU);else{cV=[];cW=bs.Get(cU);try{while(cW.MoveNext())cV.push(cW.Current());return cV;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}}};e.tryFindIndex=function(cU,cV){var cW,cX;cW=null;cX=0;while(cX<cV.length&&cW==null){cU(cV[cX])?cW={$:1,$0:cX}:void 0;cX=cX+1;}return cW;};e.ofList=function(cU){var cV,cW;cW=[];cV=cU;while(!(cV.$==0)){cW.push(bB.head(cV));cV=bB.tail(cV);}return cW;};e.map2=function(cU,cV,cW){var cX,cY,cZ;e.checkLength(cV,cW);cX=new a.Array(cW.length);for(cY=0,cZ=cW.length-1;cY<=cZ;cY++)cX[cY]=cU(cV[cY],cW[cY]);return cX;};e.forall=function(cU,cV){var cW,cX,cY,cZ;cW=true;cX=0;cZ=e.length(cV);while(cW&&cX<cZ)if(cU(cV[cX]))cX=cX+1;else cW=false;return cW;};e.init=function(cU,cV){var cW,cX,cY;if(cU<0)f.FailWith("Negative size given.");else null;cW=new a.Array(cU);for(cX=0,cY=cU-1;cX<=cY;cX++)cW[cX]=cV(cX);return cW;};e.exists=function(cU,cV){var cW,cX,cY,cZ;cW=false;cX=0;cZ=e.length(cV);while(!cW&&cX<cZ)if(cU(cV[cX]))cW=true;else cX=cX+1;return cW;};e.tryPick=function(cU,cV){var cW,cX,cY;cW=null;cX=0;while(cX<cV.length&&cW==null){cY=cU(cV[cX]);if(cY!=null&&cY.$==1)cW=cY;cX=cX+1;}return cW;};e.filter=function(cU,cV){var cW,cX,cY;cW=[];for(cX=0,cY=cV.length-1;cX<=cY;cX++)if(cU(cV[cX]))cW.push(cV[cX]);return cW;};e.concat=function(cU){return a.Array.prototype.concat.apply([],e.ofSeq(cU));};e.foldBack=function(cU,cV,cW){var cX,cY,cZ,c0,c1;cX=cW;cZ=cV.length;for(c0=1,c1=cZ;c0<=c1;c0++)cX=cU(cV[cZ-c0],cX);return cX;};e.pick=function(cU,cV){var cW;cW=e.tryPick(cU,cV);return cW==null?f.FailWith("KeyNotFoundException"):cW.$0;};e.sortInPlace=function(cU){e.mapInPlace(function(cV){return cV[0];},e.mapiInPlace(function(cV,cW){return[cW,cV];},cU).sort(C.Compare));};w=v.Color=cR.Class({toString:function(){return this.$==1?this.$0:this.$==2?this.$0:"rgba("+a.String(this.$0)+", "+a.String(this.$1)+", "+a.String(this.$2)+", "+this.$3.toFixed(6)+")";}},null,w);x=h.View=cR.Class({},null,x);y=k.TemplateInstance=cR.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(cU){this.anchorRoot=cU;}},g,y);y.New=cR.Ctor(function(cU,cV){g.New.call(this);this.doc=cV;this.allVars=cU.$==0?cU.$0:f.FailWith("Should not happen");this.anchorRoot=null;},y);A=z.Elt=cR.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},m,A);A.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},A);B=z.Text=cR.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},m,B);B.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},B);C.Equals=function(cU,cV){var cW,cX,cY,cZ;if(cU===cV)return true;else{cW=typeof cU;if(cW=="object"){if(cU===null||cU===void 0||cV===null||cV===void 0||!C.Equals(typeof cV,"object"))return false;else if("Equals"in cU)return cU.Equals(cV);else if("Equals"in cV)return false;else if(cU instanceof a.Array&&cV instanceof a.Array)return C.arrayEquals(cU,cV);else if(cU instanceof a.Date&&cV instanceof a.Date)return C.dateEquals(cU,cV);else{cX=[true];for(var c0 in cU)if(function(c1){cX[0]=!cU.hasOwnProperty(c1)||cV.hasOwnProperty(c1)&&C.Equals(cU[c1],cV[c1]);return!cX[0];}(c0))break;if(cX[0]){for(var c1 in cV)if(function(c2){cX[0]=!cV.hasOwnProperty(c2)||cU.hasOwnProperty(c2);return!cX[0];}(c1))break;}return cX[0];}}else return cW=="function"&&("$Func"in cU?cU.$Func===cV.$Func&&cU.$Target===cV.$Target:"$Invokes"in cU&&"$Invokes"in cV&&C.arrayEquals(cU.$Invokes,cV.$Invokes));}};C.Compare=function(cU,cV){var cW,cX,cY,cZ,c0,c1;if(cU===cV)return 0;else{cX=typeof cU;switch(cX=="function"?1:cX=="boolean"?2:cX=="number"?2:cX=="string"?2:cX=="object"?3:0){case 0:return typeof cV=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return cU<cV?-1:1;case 3:if(cU===null)cY=-1;else if(cV===null)cY=1;else if("CompareTo"in cU)cY=cU.CompareTo(cV);else if("CompareTo0"in cU)cY=cU.CompareTo0(cV);else if(cU instanceof a.Array&&cV instanceof a.Array)cY=C.compareArrays(cU,cV);else if(cU instanceof a.Date&&cV instanceof a.Date)cY=C.compareDates(cU,cV);else{cZ=[0];for(var c2 in cU)if(function(c3){return!cU.hasOwnProperty(c3)?false:!cV.hasOwnProperty(c3)?(cZ[0]=1,true):(cZ[0]=C.Compare(cU[c3],cV[c3]),cZ[0]!==0);}(c2))break;if(cZ[0]===0){for(var c3 in cV)if(function(c4){return!cV.hasOwnProperty(c4)?false:!cU.hasOwnProperty(c4)&&(cZ[0]=-1,true);}(c3))break;}cY=cZ[0];}return cY;}}};C.arrayEquals=function(cU,cV){var cW,cX;if(e.length(cU)===e.length(cV)){cW=true;cX=0;while(cW&&cX<e.length(cU)){!C.Equals(e.get(cU,cX),e.get(cV,cX))?cW=false:void 0;cX=cX+1;}return cW;}else return false;};C.dateEquals=function(cU,cV){return cU.getTime()===cV.getTime();};C.compareArrays=function(cU,cV){var cW,cX;if(e.length(cU)<e.length(cV))return -1;else if(e.length(cU)>e.length(cV))return 1;else{cW=0;cX=0;while(cW===0&&cX<e.length(cU)){cW=C.Compare(e.get(cU,cX),e.get(cV,cX));cX=cX+1;}return cW;}};C.compareDates=function(cU,cV){return C.Compare(cU.getTime(),cV.getTime());};C.Hash=function(cU){var cV;cV=typeof cU;return cV=="function"?0:cV=="boolean"?cU?1:0:cV=="number"?cU:cV=="string"?C.hashString(cU):cV=="object"?cU==null?0:cU instanceof a.Array?C.hashArray(cU):C.hashObject(cU):0;};C.hashString=function(cU){var cV,cW,cX;if(cU===null)return 0;else{cV=5381;for(cW=0,cX=cU.length-1;cW<=cX;cW++)cV=C.hashMix(cV,cU[cW].charCodeAt());return cV;}};C.hashArray=function(cU){var cV,cW,cX;cV=-34948909;for(cW=0,cX=e.length(cU)-1;cW<=cX;cW++)cV=C.hashMix(cV,C.Hash(e.get(cU,cW)));return cV;};C.hashObject=function(cU){var cV,cW;if("GetHashCode"in cU)return cU.GetHashCode();else{cV=[0];for(var cX in cU)if(function(cY){cV[0]=C.hashMix(C.hashMix(cV[0],C.hashString(cY)),C.Hash(cU[cY]));return false;}(cX))break;return cV[0];}};C.hashMix=function(cU,cV){return(cU<<5)+cU+cV;};E.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cU){var cV,cW;cV=cQ.random()*16|0;cW=cU=="x"?cV:cV&3|8;return cW.toString(16);});};F.$cctor=function(){var cU;F.$cctor=a.ignore;F.newMonth=X.Create$1("");F.newSalary=X.Create$1("");F.newUtility=X.Create$1("");F.newFood=X.Create$1("");F.newBalance=X.Create$1("");F.Balance=P.FromSeq([["January","500000","150000","100000","250000"],["Febrary","500000","142000","98000","260000"],["March","500000","120000","90000","290000"],["April","500000","100000","100000","300000"]]);F.strage=self.localStorage;F.counter=(cU=o.strage().getItem("counter"),X.Create$1(cU==""?0:f.toInt(a.Number(cU))));F.Stock=P.FromSeq([["a company","0.5"],["b company","1.0"],["c company","0.5"]]);F.newCompany=X.Create$1("");F.newPrice=X.Create$1("");F.router=R.r();F.currentPage=Y.InstallHash({$:0},c.router());};G.RenderCombinedBarChart=function(cU,cV,cW,cX){return G.withNewCanvas(cV,function(cY){var cZ,c0,c1,c2,c3;cZ=(c0=Z.choose(function(c4){var c5;c5=c4.get_DataSet();return c5.$==1?null:{$:1,$0:Z.map(function(c6){return c6[0];},c5.$0)};},cU.get_Charts()),Z.length(c0)>0?Z.maxBy(Z.length,c0):[]);c1=(c2={},c2.datasets=e.ofSeq(Z.map(function(c4){var c5,c6;c5=G.mkInitial(c4.get_DataSet(),cX);c6={type:"bar"};c6.label=c4.get__Config().Title;c6.backgroundColor=a.String(c4.get__SeriesConfig().FillColor);c6.borderColor=a.String(c4.get__SeriesConfig().StrokeColor);c6.data=e.map(function(c7){return c7[1];},c5);return c6;},cU.get_Charts())),c2);c1.labels=e.ofSeq(cZ);c3=new a.Chart(cY,{data:c1,options:cW==null?{}:cW.$0});Z.iteri(function(c4,c5){return G.registerUpdater(c5,function(c6,c7){var c8;c8=e.get(c3.data.datasets,c4).data;c8[c6]=c7(e.get(c8,c6));},function(){c3.update();});},cU.get_Charts());return G.onCombinedEvent(G.extractStreams(Z.map(function(c4){return c4.get_DataSet();},cU.get_Charts())),Z.length(cU.get_Charts()),cX,function(){var c4,c5,c6;c4=c3.data;c5=c4.datasets;c6=c4.labels;e.iter(function(c7){c7.data.shift();},c5);c6.shift();return c3.update();},function(c4,c5){var c6,c7,c8,c9;c6=c5[0];c7=c3.data;c8=c7.datasets;c9=c7.labels;e.iteri(function(c_,c$){var da;da=c$.data;return da[e.length(da)]=e.get(c6,c_);},c8);c9[e.length(c9)]=c5[1];return c3.update();});});};G.withNewCanvas=function(cU,cV){var cW,cX;cW=cU.$0;cX=cU.$1;return J.Element("div",[bP.Create("width",a.String(cW)),bP.Create("height",a.String(cX)),bp.Style("width",a.String(cW)+"px"),bp.Style("height",a.String(cX)+"px")],[J.Element("canvas",[bp.OnAfterRender(function(cY){var cZ;cZ=cY.getContext("2d");cY.width=cW;cY.height=cX;cV(cY,cZ);})],[])]);};G.mkInitial=function(cU,cV){return cU.$==0?bu.fold(function(cW,cX){var cY;cY=e.length(cW)-cX;return cY>=e.length(cW)?[]:cY<=0?cW:bv.array(cW,{$:1,$0:cY},null);},e.ofSeq(cU.$0),cV):[];};G.registerUpdater=function(cU,cV,cW){var cX;function cY(cZ,c0){cV(cZ,c0);cX.Update(cW);}cX=new bw.New(null,null);cU.WebSharper_Charting_Charts_IMutableChart_2$OnUpdate(function(cZ){return cY(cZ[0],cZ[1]);});};G.onCombinedEvent=function(cU,cV,cW,cX,cY){var cZ;cZ=[0];cU.Subscribe(bx.observer(function(c0){var c1,c2,c3,c4,c5;function c6(c7,c8){e.set(c2,c7,c8[1]);}if(cW==null);else{c1=cW.$0;cZ[0]>=c1?cX(c1,cZ[0]):void 0;}c2=e.ofSeq(Z.delay(function(){return Z.map(function(){return 0;},f.range(1,cV));}));Z.iter(function(c7){return c6(c7[0],c7[1]);},c0);c3=by.headOption(c0);if(c3==null);else{c4=c3.$0;c4[0];c5=c4[1];cY(cZ[0],[c2,c5[0]]);}cZ[0]++;}));};G.extractStreams=function(cU){return bA.SequenceOnlyNew(Z.choose(a.id,Z.mapi(function(cV,cW){return cW.$==0?null:{$:1,$0:bz.Select(cW.$0,function(cX){return[cV,cX];})};},cU)));};q.defaultSize=function(){_3.$cctor();return _3.defaultSize;};I.LoadLocalTemplates=function(cU){!I.LocalTemplatesLoaded()?(I.set_LocalTemplatesLoaded(true),I.LoadNestedTemplates(self.document.body,"")):void 0;I.LoadedTemplates().set_Item(cU,I.LoadedTemplateFile(""));};I.LocalTemplatesLoaded=function(){bD.$cctor();return bD.LocalTemplatesLoaded;};I.set_LocalTemplatesLoaded=function(cU){bD.$cctor();bD.LocalTemplatesLoaded=cU;};I.LoadNestedTemplates=function(cU,cV){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df;function cW(dg){var dh,di;if(!cX.ContainsKey(dg)){dh=(di=null,[cY.TryGetValue(dg,{get:function(){return di;},set:function(dj){di=dj;}}),di]);if(dh[0]){df.SAdd(dg);cY.RemoveKey(dg);I.PrepareTemplateStrict(cV,{$:1,$0:dg},dh[1],{$:1,$0:cW});}else cS.warn(df.Contains(dg)?"Encountered loop when instantiating "+dg:"Local template does not exist: "+dg);}}cX=I.LoadedTemplateFile(cV);cY=new _5.New$5();cZ=cU.querySelectorAll("[ws-template]");for(c0=0,c1=cZ.length-1;c0<=c1;c0++){c2=cZ[c0];c3=c2.getAttribute("ws-template").toLowerCase();c2.removeAttribute("ws-template");cY.set_Item(c3,I.FakeRootSingle(c2));}c4=cU.querySelectorAll("[ws-children-template]");for(c5=0,c6=c4.length-1;c5<=c6;c5++){c7=c4[c5];c8=c7.getAttribute("ws-children-template").toLowerCase();c7.removeAttribute("ws-children-template");cY.set_Item(c8,I.FakeRoot(c7));}c9=cU.querySelectorAll("template[id]");for(c_=0,c$=c9.length-1;c_<=c$;c_++){da=c9[c_];cY.set_Item(da.getAttribute("id").toLowerCase(),I.FakeRootFromHTMLTemplate(da));}db=cU.querySelectorAll("template[name]");for(dc=0,dd=db.length-1;dc<=dd;dc++){de=db[dc];cY.set_Item(de.getAttribute("name").toLowerCase(),I.FakeRootFromHTMLTemplate(de));}df=new bb.New$3();while(cY.count>0)cW(Z.head(cY.Keys()));};I.LoadedTemplates=function(){bD.$cctor();return bD.LoadedTemplates;};I.LoadedTemplateFile=function(cU){var cV,cW,cX;cV=(cW=null,[I.LoadedTemplates().TryGetValue(cU,{get:function(){return cW;},set:function(cY){cW=cY;}}),cW]);return cV[0]?cV[1]:(cX=new _5.New$5(),(I.LoadedTemplates().set_Item(cU,cX),cX));};I.RunFullDocTemplate=function(cU){var cV,cW,cX;return I.RenderedFullDocTemplate()==null?(cV=(I.LoadLocalTemplates(""),I.PrepareTemplateStrict("",null,self.document.body,null),cW=I.ChildrenTemplate(self.document.body,cU),cX=self.document.body,function(cY){J.RunInPlace(true,cX,cY);}(cW),cW),(I.set_RenderedFullDocTemplate({$:1,$0:cV}),cV)):I.RenderedFullDocTemplate().$0;};I.FakeRootSingle=function(cU){var cV,cW,cX,cY;cU.removeAttribute("ws-template");cV=cU.getAttribute("ws-replace");if(cV==null);else{cU.removeAttribute("ws-replace");cW=cU.parentNode;C.Equals(cW,null)?void 0:(cX=self.document.createElement(cU.tagName),cX.setAttribute("ws-replace",cV),cW.replaceChild(cX,cU));}cY=self.document.createElement("div");cY.appendChild(cU);return cY;};I.FakeRoot=function(cU){var cV;cV=self.document.createElement("div");while(cU.hasChildNodes())cV.appendChild(cU.firstChild);return cV;};I.FakeRootFromHTMLTemplate=function(cU){var cV,cW,cX,cY;cV=self.document.createElement("div");cW=cU.content;for(cX=0,cY=cW.childNodes.length-1;cX<=cY;cX++)cV.appendChild(cW.childNodes[cX].cloneNode(true));return cV;};I.PrepareTemplateStrict=function(cU,cV,cW,cX){var cY,cZ;function c0(c6,c7){var c8,c9,c_,c$,da,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw;function db(dx){}while(true)switch(c6){case 0:if(c7!==null){c8=c7.nextSibling;if(C.Equals(c7.nodeType,U.TEXT_NODE))bS.convertTextNode(c7);else if(C.Equals(c7.nodeType,U.ELEMENT_NODE))c2(c7);c7=c8;}else return null;break;case 1:dc=bv.string(c7.nodeName,{$:1,$0:3},null).toLowerCase();dd=(c9=dc.indexOf("."),c9===-1?[cU,dc]:[bv.string(dc,null,{$:1,$0:c9-1}),bv.string(dc,{$:1,$0:c9+1},null)]);de=dd[1];df=dd[0];if(df!=""&&!I.LoadedTemplates().ContainsKey(df))return bS.failNotLoaded(de);else{if(df==""&&cX!=null)cX.$0(de);dg=I.LoadedTemplates().Item(df);if(!dg.ContainsKey(de))return bS.failNotLoaded(de);else{dh=dg.Item(de);di=dh.cloneNode(true);dj=new bb.New$3();dk=new _5.New$5();dl=c7.attributes;for(dm=0,dn=dl.length-1;dm<=dn;dm++){_do=dl.item(dm).name.toLowerCase();dk.set_Item(_do,(dp=dl.item(dm).nodeValue,dp==""?_do:dp.toLowerCase()));if(!dj.SAdd(_do))cS.warn("Hole mapped twice",_do);}for(dq=0,dr=c7.childNodes.length-1;dq<=dr;dq++){ds=c7.childNodes[dq];if(C.Equals(ds.nodeType,U.ELEMENT_NODE))!dj.SAdd(ds.nodeName.toLowerCase())?cS.warn("Hole filled twice",de):void 0;}dt=c7.childNodes.length===1&&C.Equals(c7.firstChild.nodeType,U.TEXT_NODE);if(dt){c$=bS.fillTextHole(di,c7.firstChild.textContent,de);((function(dx){return function(dy){if(dy!=null)dx(dy.$0);};}((da=function(dx){return function(dy){return dx.SAdd(dy);};}(dj),function(dx){return db(da(dx));})))(c$));}bS.removeHolesExcept(di,dj);if(!dt){for(du=0,dv=c7.childNodes.length-1;du<=dv;du++){dw=c7.childNodes[du];if(C.Equals(dw.nodeType,U.ELEMENT_NODE))dw.hasAttributes()?bS.fillInstanceAttrs(di,dw):c1(di,dw);}}bS.mapHoles(di,dk);bS.fill(di,c7.parentNode,c7);c7.parentNode.removeChild(c7);return;}}break;}}function c1(c6,c7){var c8,c9,c$,da;function c_(db,dc){var dd;if(c$=="title"&&c7.hasChildNodes()){dd=bR.ParseHTMLIntoFakeRoot(c7.textContent);c7.removeChild(c7.firstChild);while(dd.hasChildNodes())c7.appendChild(dd.firstChild);}else null;c2(c7);return bS.fill(c7,db,dc);}c$=c7.nodeName.toLowerCase();I.foreachNotPreserved(c6,"[ws-attr-holes]",function(db){var dc,dd,de,df,dg;dc=b4.SplitChars(db.getAttribute("ws-attr-holes"),[" "],1);for(dd=0,de=dc.length-1;dd<=de;dd++){df=e.get(dc,dd);db.setAttribute(df,(dg=new a.RegExp("\\${"+c$+"}","ig"),db.getAttribute(df).replace(dg,c7.textContent)));}});da=c6.querySelector("[ws-hole="+c$+"]");if(C.Equals(da,null)){c8=c6.querySelector("[ws-replace="+c$+"]");return C.Equals(c8,null)?(c9=c6.querySelector("slot[name="+c$+"]"),c6.tagName.toLowerCase()=="template"?(c_(c9.parentNode,c9),void c9.parentNode.removeChild(c9)):null):(c_(c8.parentNode,c8),void c8.parentNode.removeChild(c8));}else{while(da.hasChildNodes())da.removeChild(da.lastChild);da.removeAttribute("ws-hole");return c_(da,null);}}function c2(c6){if(!c6.hasAttribute("ws-preserve"))if(b4.StartsWith(c6.nodeName.toLowerCase(),"ws-"))c4(c6);else{bS.convertAttrs(c6);c3(c6.firstChild);}}function c3(c6){return c0(0,c6);}function c4(c6){return c0(1,c6);}function c5(c6){var c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg;while(true){c7=c6.querySelector("[ws-template]");if(C.Equals(c7,null)){c8=c6.querySelector("[ws-children-template]");if(C.Equals(c8,null)){c9=c6.querySelectorAll("template[id]");for(c_=1,c$=c9.length-1;c_<=c$;c_++){da=c9[c_];if(cY.Contains(da));else{I.PrepareTemplateStrict(cU,{$:1,$0:da.getAttribute("id")},da,null);cY.SAdd(da);}}db=c6.querySelectorAll("template[name]");for(dc=1,dd=db.length-1;dc<=dd;dc++){de=db[dc];if(cY.Contains(de));else{I.PrepareTemplateStrict(cU,{$:1,$0:de.getAttribute("name")},de,null);cY.SAdd(de);}}return null;}else{df=c8.getAttribute("ws-children-template");c8.removeAttribute("ws-children-template");I.PrepareTemplateStrict(cU,{$:1,$0:df},c8,null);c6=c6;}}else{dg=c7.getAttribute("ws-template");(I.PrepareSingleTemplate(cU,{$:1,$0:dg},c7))(null);c6=c6;}}}cY=new bb.New$3();cZ=(cV==null?"":cV.$0).toLowerCase();I.LoadedTemplateFile(cU).set_Item(cZ,cW);if(cW.hasChildNodes()){c5(cW);c3(cW.firstChild);}};I.NamedTemplate=function(cU,cV,cW){var cX,cY;cX=(cY=null,[I.LoadedTemplateFile(cU).TryGetValue(cV==null?"":cV.$0,{get:function(){return cY;},set:function(cZ){cY=cZ;}}),cY]);return cX[0]?I.ChildrenTemplate(cX[1].cloneNode(true),cW):(cS.warn("Local template doesn't exist",cV),J.get_Empty());};I.RenderedFullDocTemplate=function(){bD.$cctor();return bD.RenderedFullDocTemplate;};I.ChildrenTemplate=function(cU,cV){var cW,cX,cY,cZ,c0;cW=I.InlineTemplate(cU,Z.append(cV,I.GlobalHoles().Values()));cX=cW[1];cY=cW[0];cZ=cY.Els;return!C.Equals(cZ,null)&&cZ.length===1&&(e.get(cZ,0)instanceof U&&(C.Equals(e.get(cZ,0).nodeType,U.ELEMENT_NODE)&&(c0=e.get(cZ,0),true)))?bX.TreeNode(cY,cX):J.Mk({$:6,$0:cY},cX);};I.set_RenderedFullDocTemplate=function(cU){bD.$cctor();bD.RenderedFullDocTemplate=cU;};I.foreachNotPreserved=function(cU,cV,cW){bR.IterSelector(cU,cV,function(cX){if(cX.closest("[ws-preserve]")==null)cW(cX);});};I.PrepareSingleTemplate=function(cU,cV,cW){var cX;cX=I.FakeRootSingle(cW);return function(cY){I.PrepareTemplateStrict(cU,cV,cX,cY);};};I.InlineTemplate=function(cU,cV){var cW,cX,cY,cZ,c0,c4,c5,c6,c7,c8,c9,c_;function c1(c$,da){var db,dc,dd;db=bQ.Insert(c$,da);c5.push(bQ.Updates(db));c6.push([c$,db]);dc=cR.GetOptional(db.OnAfterRender);return dc==null?null:(dd=dc.$0,void c7.push(function(){dd(c$);}));}function c2(c$){var da,db,dc,dd;da=(db=null,[c8.TryGetValue(c$,{get:function(){return db;},set:function(de){db=de;}}),db]);return da[0]?(dc=da[1],dc instanceof A?{$:1,$0:dc.get_Value()}:dc instanceof B?{$:1,$0:J.TextNode(dc.get_Value())}:(dd=dc.ForTextView(),dd==null?null:{$:1,$0:J.TextView(dd.$0)})):null;}function c3(){I.foreachNotPreservedwsDOM("[ws-dom]",function(c$){var da,db,dc,dd,de,df,dg;da=(db=null,[c8.TryGetValue(c$.getAttribute("ws-dom").toLowerCase(),{get:function(){return db;},set:function(dh){db=dh;}}),db]);if(da[0]){dc=da[1];dc instanceof bh?(dd=dc.get_Value(),c$.removeAttribute("ws-dom"),de=c$,df=new a.MutationObserver(function(dh,di){e.iter(function(dj){function dk(dl,dm,dn,_do){if(dl===de&&dj.addedNodes.length!==1){dd.SetFinal(null);di.disconnect();}}dj.removedNodes.forEach(cR.CreateFuncWithArgs(function(dl){return dk(dl[0],dl[1],dl[2],dl[3]);}),null);},dh);}),c$.parentElement!==null?df.observe(c$.parentElement,(dg={},dg.childList=true,dg)):void 0,dd.Set({$:1,$0:c$}),x.Sink(function(dh){var di;if(dh!=null&&dh.$==1){di=dh.$0;if(de===di);else{de.replaceWith.apply(de,[di]);de=di;}}else{de.remove();df.disconnect();}},dd.get_View())):void 0;}});}c4=[];c5=[];c6=[];c7=[];c8=new _5.New$5();c9=bs.Get(cV);try{while(c9.MoveNext()){c_=c9.Current();c8.set_Item(c_.get_Name(),c_);}}finally{if(typeof c9=="object"&&"Dispose"in c9)c9.Dispose();}cW=bR.ChildrenArray(cU);I.foreachNotPreserved(cU,"[ws-hole]",function(c$){var da,db,dc;dc=c$.getAttribute("ws-hole");c$.removeAttribute("ws-hole");while(c$.hasChildNodes())c$.removeChild(c$.lastChild);da=c2(dc);if(da!=null&&da.$==1){db=da.$0;ba.LinkElement(c$,db.docNode);c4.push(bU.New(bQ.Empty(c$),db.docNode,null,c$,bL.Int(),null));c5.push(db.updates);}});I.foreachNotPreserved(cU,"[ws-replace]",function(c$){var da,db,dc,dd,de,df;da=c2(c$.getAttribute("ws-replace"));if(da!=null&&da.$==1){db=da.$0;dc=c$.parentNode;dd=self.document.createTextNode("");dc.replaceChild(dd,c$);de=ba.InsertBeforeDelim(dd,db.docNode);df=e.tryFindIndex(function(dg){return c$===dg;},cW);df==null?void 0:e.set(cW,df.$0,db.docNode);c4.push(bU.New(bQ.Empty(dc),db.docNode,{$:1,$0:[de,dd]},dc,bL.Int(),null));c5.push(db.updates);}});cX=false;I.foreachNotPreserved(cU,"slot",function(c$){var da,db,dc,dd;dc=c$.getAttribute("name");dd=dc==""||dc==null?"default":dc.toLowerCase();if(cX&&dd=="default"||!C.Equals(cU.parentElement,null))void 0;else{while(c$.hasChildNodes())c$.removeChild(c$.lastChild);if(dd=="default")cX=true;da=c2(dd);if(da!=null&&da.$==1){db=da.$0;ba.LinkElement(c$,db.docNode);c4.push(bU.New(bQ.Empty(c$),db.docNode,null,c$,bL.Int(),null));c5.push(db.updates);}}});I.foreachNotPreserved(cU,"[ws-attr]",function(c$){var da,db,dc,dd;da=c$.getAttribute("ws-attr");c$.removeAttribute("ws-attr");db=(dc=null,[c8.TryGetValue(da,{get:function(){return dc;},set:function(de){dc=de;}}),dc]);if(db[0]){dd=db[1];dd instanceof b9?c1(c$,dd.get_Value()):cS.warn("Attribute hole filled with non-attribute data",da);}});I.foreachNotPreserved(cU,"[ws-on]",function(c$){c1(c$,bP.Concat(e.choose(function(da){var db,dc,dd,de;db=b4.SplitChars(da,[":"],1);dc=(dd=null,[c8.TryGetValue(e.get(db,1),{get:function(){return dd;},set:function(df){dd=df;}}),dd]);return dc[0]?(de=dc[1],de instanceof b_?{$:1,$0:bp.Handler(e.get(db,0),de.get_Value())}:de instanceof $?{$:1,$0:bP.Handler(e.get(db,0),de.get_Value())}:(cS.warn("Event hole on"+e.get(db,0)+" filled with non-event data",e.get(db,1)),null)):null;},b4.SplitChars(c$.getAttribute("ws-on"),[" "],1))));c$.removeAttribute("ws-on");});I.foreachNotPreserved(cU,"[ws-onafterrender]",function(c$){var da,db,dc,dd;da=c$.getAttribute("ws-onafterrender");db=(dc=null,[c8.TryGetValue(da,{get:function(){return dc;},set:function(de){dc=de;}}),dc]);if(db[0]){dd=db[1];dd instanceof b$?(c$.removeAttribute("ws-onafterrender"),c1(c$,bp.OnAfterRender(dd.get_Value()))):dd instanceof ca?(c$.removeAttribute("ws-onafterrender"),c1(c$,bp.OnAfterRender(dd.get_Value()))):cS.warn("onafterrender hole filled with non-onafterrender data",da);}});I.foreachNotPreserved(cU,"[ws-var]",function(c$){var da,db,dc;da=c$.getAttribute("ws-var");c$.removeAttribute("ws-var");db=(dc=null,[c8.TryGetValue(da,{get:function(){return dc;},set:function(dd){dc=dd;}}),dc]);if(db[0])db[1].AddAttribute(function(dd){return function(de){return c1(dd,de);};},c$);});I.foreachNotPreserved(cU,"[ws-attr-holes]",function(c$){var da,db,dc,dd;da=new a.RegExp(I.TextHoleRE(),"g");db=b4.SplitChars(c$.getAttribute("ws-attr-holes"),[" "],1);c$.removeAttribute("ws-attr-holes");for(dc=0,dd=db.length-1;dc<=dd;dc++)(function(){var de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq;dn=e.get(db,dc);_do=c$.getAttribute(dn);de=null;df=0;dp=[];while(de=da.exec(_do),de!==null){dq=bv.string(_do,{$:1,$0:df},{$:1,$0:da.lastIndex-e.get(de,0).length-1});df=da.lastIndex;dp.push([dq,e.get(de,1)]);}dh=bv.string(_do,{$:1,$0:df},null);da.lastIndex=0;di=e.foldBack(function(dr,ds){return(function(dt){var du,dv;du=dt[0];dv=dt[1];return function(dw){var dx,dy,dz,dA,dB;dx=dw[0];dy=dw[1];dz=(dA=(dB=null,[c8.TryGetValue(dv,{get:function(){return dB;},set:function(dC){dB=dC;}}),dB]),dA[0]?dA[1].get_AsChoiceView():{$:0,$0:""});return dz.$==1?[du,new bC({$:1,$0:dx==""?dz.$0:x.Map(function(dC){return dC+dx;},dz.$0),$1:dy})]:[du+dz.$0+dx,dy];};}(dr))(ds);},dp,[dh,bC.Empty]);return c1(c$,di[1].$==1?di[1].$1.$==1?di[1].$1.$1.$==1?di[1].$1.$1.$1.$==0?(dj=di[0],bp.Dynamic(dn,x.Map3(function(dr,ds,dt){return dj+dr+ds+dt;},di[1].$0,di[1].$1.$0,di[1].$1.$1.$0))):(dk=di[0],bp.Dynamic(dn,x.Map(function(dr){return dk+b4.concat("",dr);},x.Sequence(di[1])))):(dl=di[0],bp.Dynamic(dn,x.Map2(function(dr,ds){return dl+dr+ds;},di[1].$0,di[1].$1.$0))):di[0]==""?bp.Dynamic(dn,di[1].$0):(dm=di[0],bp.Dynamic(dn,x.Map(function(dr){return dm+dr;},di[1].$0))):bP.Create(dn,di[0]));}());});return[cR.DeleteEmptyFields({Els:cW,Dirty:true,Holes:c4,Attrs:c6,Render:(cY=c7.length==0?{$:1,$0:function(){c3();}}:{$:1,$0:function(c$){c3();e.iter(function(da){da(c$);},c7);}},cY?cY.$0:void 0),El:(cZ=!C.Equals(cW,null)&&cW.length===1&&(e.get(cW,0)instanceof U&&(e.get(cW,0)instanceof bq&&(c0=e.get(cW,0),true)))?{$:1,$0:c0}:null,cZ?cZ.$0:void 0)},["Render","El"]),cb.TreeReduce(x.Const(),x.Map2Unit,c5)];};I.GlobalHoles=function(){bD.$cctor();return bD.GlobalHoles;};I.TextHoleRE=function(){bD.$cctor();return bD.TextHoleRE;};I.foreachNotPreservedwsDOM=function(cU,cV){bR.IterSelectorDoc(cU,function(cW){if(cW.closest("[ws-preserve]")==null)cV(cW);});};J=h.Doc=cR.Class({},g,J);J.RunAppendById=function(cU,cV){var cW;cW=self.document.getElementById(cU);if(C.Equals(cW,null))f.FailWith("invalid id: "+cU);else J.RunAppend(cW,cV);};J.EmbedView=function(cU){var cV;cV=ba.CreateEmbedNode();return J.Mk({$:2,$0:cV},x.Map(a.ignore,x.Bind(function(cW){ba.UpdateEmbedNode(cV,cW.docNode);return cW.updates;},cU)));};J.RunAppend=function(cU,cV){var cW;cW=self.document.createTextNode("");cU.appendChild(cW);J.RunBefore(cW,cV);};J.Mk=function(cU,cV){return new J.New(cU,cV);};J.RunBefore=function(cU,cV){var cW;cW=self.document.createTextNode("");cU.parentNode.insertBefore(cW,cU);J.RunBetween(cW,cU,cV);};J.Convert=function(cU,cV){return J.Flatten(x.MapSeqCached(cU,cV));};J.RunInPlace=function(cU,cV,cW){var cX;cX=ba.CreateRunState(cV,cW.docNode);x.Sink(bY.get_UseAnimations()||bZ.BatchUpdatesEnabled()?b0.StartProcessor(ba.PerformAnimatedUpdate(cU,cX,cW.docNode)):function(){ba.PerformSyncUpdate(cU,cX,cW.docNode);},cW.updates);};J.RunBetween=function(cU,cV,cW){var cX;ba.LinkPrevElement(cV,cW.docNode);cX=ba.CreateDelimitedRunState(cU,cV,cW.docNode);x.Sink(bY.get_UseAnimations()||bZ.BatchUpdatesEnabled()?b0.StartProcessor(ba.PerformAnimatedUpdate(false,cX,cW.docNode)):function(){ba.PerformSyncUpdate(false,cX,cW.docNode);},cW.updates);};J.Flatten=function(cU){return J.EmbedView(x.Map(J.Concat,cU));};J.get_Empty=function(){return J.Mk(null,x.Const());};J.Element=function(cU,cV,cW){var cX,cY;cX=bP.Concat(cV);cY=J.Concat(cW);return bX.New(self.document.createElement(cU),cX,cY);};J.Concat=function(cU){var cV;cV=cb.ofSeqNonCopying(cU);return cb.TreeReduce(J.get_Empty(),J.Append,cV);};J.TextNode=function(cU){return J.Mk({$:5,$0:self.document.createTextNode(cU)},x.Const());};J.TextView=function(cU){var cV;cV=ba.CreateTextNode();return J.Mk({$:4,$0:cV},x.Map(function(cW){ba.UpdateTextNode(cV,cW);},cU));};J.Append=function(cU,cV){return J.Mk({$:0,$0:cU.docNode,$1:cV.docNode},x.Map2Unit(cU.updates,cV.updates));};J.New=cR.Ctor(function(cU,cV){g.New.call(this);this.docNode=cU;this.updates=cV;},J);L.NewFromSeq=function(cU){var cV,cW,cX;cV={};cW=bs.Get(cU);try{while(cW.MoveNext()){cX=cW.Current();cV[cX[0]]=cX[1];}}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}return cV;};M=t.CompositeChart=cR.Class({get_Charts:function(){return this.charts;}},g,M);M.New=cR.Ctor(function(cU){g.New.call(this);this.charts=cU;},M);t.defaultChartConfig=function(){_8.$cctor();return _8.defaultChartConfig;};t.defaultSeriesChartConfig=function(){_8.$cctor();return _8.defaultSeriesChartConfig;};O.TryParseInt32=function(cU,cV){return O.TryParse(cU,-2147483648,2147483647,cV);};x.Map=function(cU,cV){return x.CreateLazy(function(){return _9.Map(cU,cV());});};x.CreateLazy=function(cU){var cV;cV={c:null,o:cU};return function(){var cW,cX;cW=cV.c;return cW===null?(cW=cV.o(),cV.c=cW,(cX=cW.s,cX!=null&&cX.$==0)?cV.o=null:_9.WhenObsoleteRun(cW,function(){cV.c=null;}),cW):cW;};};x.Bind=function(cU,cV){return x.Join(x.Map(cU,cV));};x.Join=function(cU){return x.CreateLazy(function(){return _9.Join(cU());});};x.Sink=function(cU,cV){function cW(){_9.WhenRun(cV(),cU,function(){b6.scheduler().Fork(cW);});}b6.scheduler().Fork(cW);};x.MapSeqCached=function(cU,cV){return x.MapSeqCachedBy(a.id,cU,cV);};x.MapSeqCachedBy=function(cU,cV,cW){var cX;cX=[new _5.New$5()];return x.Map(function(cY){var cZ,c0,c1;cZ=cX[0];c0=new _5.New$5();c1=cb.mapInPlace(function(c2){var c3,c4;c3=cU(c2);c4=cZ.ContainsKey(c3)?cZ.Item(c3):cV(c2);c0.set_Item(c3,c4);return c4;},e.ofSeq(cY));cX[0]=c0;return c1;},cW);};x.Const=function(cU){var cV;cV=_9.New({$:0,$0:cU});return function(){return cV;};};x.Map3=function(cU,cV,cW,cX){return x.CreateLazy(function(){return _9.Map3(cU,cV(),cW(),cX());});};x.Sequence=function(cU){return x.CreateLazy(function(){return _9.Sequence(Z.map(function(cV){return cV();},cU));});};x.Map2=function(cU,cV,cW){return x.CreateLazy(function(){return _9.Map2(cU,cV(),cW());});};x.Map2Unit=function(cU,cV){return x.CreateLazy(function(){return _9.Map2Unit(cU(),cV());});};P=h.ListModel=cR.Class({Append:function(cU){var cV,cW,cX,cY;cV=this;cW=this["var"].Get();cX=this.key(cU);cY=e.tryFindIndex(function(cZ){return C.Equals(cV.key(cZ),cX);},cW);if(cY!=null&&cY.$==1)this["var"].Set(this.storage.SSetAt(cY.$0,cU,cW));else this["var"].Set(this.storage.SAppend(cU,cW));this.ObsoleteKey(cX);},ObsoleteKey:function(cU){var cV,cW;cV=(cW=null,[this.it.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);if(cV[0]){_9.Obsolete(cV[1]);this.it.RemoveKey(cU);}},GetEnumerator:function(){return bs.Get(this["var"].Get());},GetEnumerator0:function(){return bs.Get0(this["var"].Get());}},g,P);P.New=cR.Ctor(function(cU,cV){P.New$3.call(this,cU,X.Create$1(e.ofSeq(Z.distinctBy(cU,cV.SInit()))),cV);},P);P.New$3=cR.Ctor(function(cU,cV,cW){g.New.call(this);this.key=cU;this["var"]=cV;this.storage=cW;this.v=x.Map(function(cX){return cX.slice();},this["var"].get_View());this.it=new _5.New$5();},P);Q.listitem2=function(cU){I.LoadLocalTemplates("index");return cU?I.NamedTemplate("index",{$:1,$0:"listitem2"},cU):void 0;};Q.page1=function(cU){I.LoadLocalTemplates("index");return cU?I.NamedTemplate("index",{$:1,$0:"page1"},cU):void 0;};Q.listitem=function(cU){I.LoadLocalTemplates("index");return cU?I.NamedTemplate("index",{$:1,$0:"listitem"},cU):void 0;};Q.homepage=function(cU){I.LoadLocalTemplates("index");return cU?I.NamedTemplate("index",{$:1,$0:"homepage"},cU):void 0;};R.r=function(){return bk.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["page1"]]],[]]]);};S.EventQ2=function(cU,cV,cW,cX){return new $.New(cV,function(cY){return function(cZ){var c0;c0=cW();c0.SetAnchorRoot(cY);return cX({Vars:c0,Anchors:c0,Target:cY,Event:cZ});};});};S.CompleteHoles=function(cU,cV,cW){var cY,cZ,c0,c1,c2;function cX(c3,c4,c5){var c6;return cZ.Contains(c3)?null:(c6=C.Equals(c4,0)?bc.GetOrAddHoleFor(cU,c3,function(){return new _.New(c3,X.Create$1(""));}):C.Equals(c4,1)?bc.GetOrAddHoleFor(cU,c3,function(){return new bd.New(c3,X.Create$1(0));}):C.Equals(c4,2)?bc.GetOrAddHoleFor(cU,c3,function(){return new be.New(c3,X.Create$1(false));}):C.Equals(c4,3)?bc.GetOrAddHoleFor(cU,c3,function(){return new bf.New(c3,X.Create$1(-8640000000000000));}):C.Equals(c4,4)?bc.GetOrAddHoleFor(cU,c3,function(){return new bg.New(c3,X.Create$1([]));}):C.Equals(c4,5)?bc.GetOrAddHoleFor(cU,c3,function(){var c7;c7=self.document.querySelector("[ws-dom="+c3+"]");c7.removeAttribute("ws-dom");return new bh.New(c3,X.Create$1({$:1,$0:c7}));}):f.FailWith("Invalid value type"),(cY.set_Item(c3,c6),{$:1,$0:c6}));}cY=new _5.New$5();cZ=new bb.New$3();c0=bs.Get(cV);try{while(c0.MoveNext()){c1=c0.Current();c2=c1.get_Name();cZ.SAdd(c2);cY.set_Item(c2,c1);}}finally{if(typeof c0=="object"&&"Dispose"in c0)c0.Dispose();}return[Z.append(cV,e.choose(function(c3){return cX(c3[0],c3[1],c3[2]);},cW)),{$:0,$0:cY}];};W.GetFieldValues=function(cU){var cV,cW;cV=[];for(var cX in cU)cV.push(cU[cX]);return cV;};X=h.Var$1=cR.Class({},g,X);X.Create$1=function(cU){return new bi.New(false,_9.New({$:2,$0:cU,$1:[]}),cU);};P.FromSeq=function(cU){return P.Create(a.id,cU);};P.Create=function(cU,cV){return P.CreateWithStorage(cU,bM.InMemory(e.ofSeq(cV)));};P.CreateWithStorage=function(cU,cV){return new P.New(cU,cV);};Y.InstallHash=function(cU,cV){var cW;cW=X.Create$1(void 0);Y.InstallHashInto(cW,cU,cV);return cW;};Y.InstallHashInto=function(cU,cV,cW){function cX(c0){return bl.Parse(cW,bm.FromHash(c0,{$:1,$0:true}));}function cY(){return Y.getCurrentHash(cX,cV);}function cZ(c0){if(!C.Equals(cU.Get(),c0))cU.Set(c0);}cZ(cY());self.addEventListener("popstate",function(){return cZ(cY());},false);self.addEventListener("hashchange",function(){return cZ(cY());},false);self.document.body.addEventListener("click",function(c0){var c1,c2,c3;c1=(c2=Y.findLinkHref(c0.target),c2==null?null:(c3=c2.$0,b4.StartsWith(c3,"#")?cX(c3):null));return c1==null?null:(cZ(c1.$0),c0.preventDefault());},false);x.Sink(function(c0){var c1;if(!C.Equals(c0,cY())){c1=bl.HashLink(cW,c0);self.history.pushState(null,null,c1);}},cU.get_View());};Y.getCurrentHash=function(cU,cV){var cW,cX;cW=self.location.hash;cX=cU(cW);return cX==null?((function(cY){return function(cZ){return cY("Failed to parse route: "+b5.toSafe(cZ));};}(function(cY){cS.log(cY);}))(cW),cV):cX.$0;};Y.findLinkHref=function(cU){while(true)if(cU.tagName=="A")return bu.ofObj(cU.getAttribute("href"));else if(cU===self.document.body)return null;else cU=cU.parentNode;};Z.map=function(cU,cV){return{GetEnumerator:function(){var cW;cW=bs.Get(cV);return new bt.New(null,null,function(cX){return cW.MoveNext()&&(cX.c=cU(cW.Current()),true);},function(){cW.Dispose();});}};};Z.iteri=function(cU,cV){var cW,cX;cW=0;cX=bs.Get(cV);try{while(cX.MoveNext()){cU(cW,cX.Current());cW=cW+1;}}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}};Z.length=function(cU){var cV,cW;cV=0;cW=bs.Get(cU);try{while(cW.MoveNext())cV=cV+1;return cV;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};Z.choose=function(cU,cV){return Z.collect(function(cW){var cX;cX=cU(cW);return cX==null?bC.Empty:bB.ofArray([cX.$0]);},cV);};Z.maxBy=function(cU,cV){var cW,cX,cY,cZ,c0;cW=bs.Get(cV);try{if(!cW.MoveNext())Z.seqEmpty();cX=cW.Current();cY=cU(cX);while(cW.MoveNext()){cZ=cW.Current();c0=cU(cZ);if(C.Compare(c0,cY)===1){cX=cZ;cY=c0;}}return cX;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};Z.append=function(cU,cV){return{GetEnumerator:function(){var cW,cX;cW=bs.Get(cU);cX=[true];return new bt.New(cW,null,function(cY){var cZ;return cY.s.MoveNext()?(cY.c=cY.s.Current(),true):(cZ=cY.s,!C.Equals(cZ,null)?cZ.Dispose():void 0,cY.s=null,cX[0]&&(cX[0]=false,cY.s=bs.Get(cV),cY.s.MoveNext()?(cY.c=cY.s.Current(),true):(cY.s.Dispose(),cY.s=null,false)));},function(cY){var cZ;cZ=cY.s;if(!C.Equals(cZ,null))cZ.Dispose();});}};};Z.delay=function(cU){return{GetEnumerator:function(){return bs.Get(cU());}};};Z.iter=function(cU,cV){var cW;cW=bs.Get(cV);try{while(cW.MoveNext())cU(cW.Current());}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};Z.mapi=function(cU,cV){return Z.map2(cU,Z.initInfinite(a.id),cV);};Z.collect=function(cU,cV){return Z.concat(Z.map(cU,cV));};Z.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};Z.head=function(cU){var cV;cV=bs.Get(cU);try{return cV.MoveNext()?cV.Current():Z.insufficient();}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};Z.indexed=function(cU){return Z.mapi(function(cV,cW){return[cV,cW];},cU);};Z.tryFindIndex=function(cU,cV){var cW,cX,cY;cW=bs.Get(cV);try{cX=true;cY=0;while(cX&&cW.MoveNext())if(cU(cW.Current()))cX=false;else cY=cY+1;return cX?null:{$:1,$0:cY};}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};Z.tryPick=function(cU,cV){var cW,cX;cW=bs.Get(cV);try{cX=null;while(C.Equals(cX,null)&&cW.MoveNext())cX=cU(cW.Current());return cX;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};Z.init=function(cU,cV){return Z.take(cU,Z.initInfinite(cV));};Z.isEmpty=function(cU){var cV;cV=bs.Get(cU);try{return!cV.MoveNext();}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};Z.map2=function(cU,cV,cW){return{GetEnumerator:function(){var cX,cY;cX=bs.Get(cV);cY=bs.Get(cW);return new bt.New(null,null,function(cZ){return cX.MoveNext()&&cY.MoveNext()&&(cZ.c=cU(cX.Current(),cY.Current()),true);},function(){cX.Dispose();cY.Dispose();});}};};Z.initInfinite=function(cU){return{GetEnumerator:function(){return new bt.New(0,null,function(cV){cV.c=cU(cV.s);cV.s=cV.s+1;return true;},void 0);}};};Z.concat=function(cU){return{GetEnumerator:function(){var cV;function cW(cX){var cY;while(true){cY=cX.s;if(C.Equals(cY,null)){if(cV.MoveNext()){cX.s=bs.Get(cV.Current());cX=cX;}else{cV.Dispose();return false;}}else if(cY.MoveNext()){cX.c=cY.Current();return true;}else{cX.Dispose();cX.s=null;cX=cX;}}}cV=bs.Get(cU);return new bt.New(null,null,cW,function(cX){var cY;cY=cX.s;if(!C.Equals(cY,null))cY.Dispose();if(!C.Equals(cV,null))cV.Dispose();});}};};Z.take=function(cU,cV){cU<0?Z.nonNegative():void 0;return{GetEnumerator:function(){var cW;cW=[bs.Get(cV)];return new bt.New(0,null,function(cX){var cY;cX.s=cX.s+1;return cX.s>cU?false:(cY=cW[0],C.Equals(cY,null)?Z.insufficient():cY.MoveNext()?(cX.c=cY.Current(),cX.s===cU?(cY.Dispose(),cW[0]=null):void 0,true):(cY.Dispose(),cW[0]=null,Z.insufficient()));},function(){var cX;cX=cW[0];if(!C.Equals(cX,null))cX.Dispose();});}};};Z.nth=function(cU,cV){var cW,cX;if(cU<0)f.FailWith("negative index requested");cW=-1;cX=bs.Get(cV);try{while(cW<cU){!cX.MoveNext()?Z.insufficient():void 0;cW=cW+1;}return cX.Current();}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}};Z.fold=function(cU,cV,cW){var cX,cY;cX=cV;cY=bs.Get(cW);try{while(cY.MoveNext())cX=cU(cX,cY.Current());return cX;}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}};Z.distinctBy=function(cU,cV){return{GetEnumerator:function(){var cW,cX;cW=bs.Get(cV);cX=new bb.New$3();return new bt.New(null,null,function(cY){var cZ,c0;if(cW.MoveNext()){cZ=cW.Current();c0=cX.SAdd(cU(cZ));while(!c0&&cW.MoveNext()){cZ=cW.Current();c0=cX.SAdd(cU(cZ));}return c0&&(cY.c=cZ,true);}else return false;},function(){cW.Dispose();});}};};Z.compareWith=function(cU,cV,cW){var cX,cY,cZ,c0,c1;cX=bs.Get(cV);try{cZ=bs.Get(cW);try{c0=0;c1=true;while(c1&&c0===0)if(cX.MoveNext())c0=cZ.MoveNext()?cU(cX.Current(),cZ.Current()):1;else if(cZ.MoveNext())c0=-1;else c1=false;cY=c0;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}return cY;}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}};Z.forall2=function(cU,cV,cW){return!Z.exists2(function(cX,cY){return!cU(cX,cY);},cV,cW);};Z.exists2=function(cU,cV,cW){var cX,cY,cZ,c0;cX=bs.Get(cV);try{cZ=bs.Get(cW);try{c0=false;while(!c0&&cX.MoveNext()&&cZ.MoveNext())c0=cU(cX.Current(),cZ.Current());cY=c0;}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}return cY;}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}};Z.rev=function(cU){return Z.delay(function(){return e.ofSeq(cU).slice().reverse();});};Z.max=function(cU){var cV,cW,cX;cV=bs.Get(cU);try{if(!cV.MoveNext())Z.seqEmpty();cW=cV.Current();while(cV.MoveNext()){cX=cV.Current();if(C.Compare(cX,cW)===1)cW=cX;}return cW;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};Z.distinct=function(cU){return Z.distinctBy(a.id,cU);};Z.unfold=function(cU,cV){return{GetEnumerator:function(){return new bt.New(cV,null,function(cW){var cX;cX=cU(cW.s);return cX==null?false:(cW.c=cX.$0[0],cW.s=cX.$0[1],true);},void 0);}};};Z.forall=function(cU,cV){return!Z.exists(function(cW){return!cU(cW);},cV);};Z.exists=function(cU,cV){var cW,cX;cW=bs.Get(cV);try{cX=false;while(!cX&&cW.MoveNext())cX=cU(cW.Current());return cX;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};_1.New=function(cU){return{Title:cU};};_2.New=function(cU,cV,cW,cX,cY){return{XAxis:cU,YAxis:cV,FillColor:cW,StrokeColor:cX,IsFilled:cY};};_3.$cctor=function(){_3.$cctor=a.ignore;_3.defaultSize={$:0,$0:500,$1:200};};_5=_4.Dictionary=cR.Class({set_Item:function(cU,cV){this.set(cU,cV);},ContainsKey:function(cU){var cV,cW;cV=this;cW=this.data[this.hash(cU)];return cW==null?false:e.exists(function(cX){return cV.equals.apply(null,[(f.KeyValue(cX))[0],cU]);},cW);},TryGetValue:function(cU,cV){var cW,cX,cY;cW=this;cX=this.data[this.hash(cU)];return cX==null?false:(cY=e.tryPick(function(cZ){var c0;c0=f.KeyValue(cZ);return cW.equals.apply(null,[c0[0],cU])?{$:1,$0:c0[1]}:null;},cX),cY!=null&&cY.$==1&&(cV.set(cY.$0),true));},RemoveKey:function(cU){return this.remove(cU);},Keys:function(){return new bT.New(this);},set:function(cU,cV){var cW,cX,cY,cZ;cW=this;cX=this.hash(cU);cY=this.data[cX];if(cY==null){this.count=this.count+1;this.data[cX]=new a.Array({K:cU,V:cV});}else{cZ=e.tryFindIndex(function(c0){return cW.equals.apply(null,[(f.KeyValue(c0))[0],cU]);},cY);cZ==null?(this.count=this.count+1,cY.push({K:cU,V:cV})):cY[cZ.$0]={K:cU,V:cV};}},remove:function(cU){var cV,cW,cX,cY;cV=this;cW=this.hash(cU);cX=this.data[cW];return cX==null?false:(cY=e.filter(function(cZ){return!cV.equals.apply(null,[(f.KeyValue(cZ))[0],cU]);},cX),e.length(cY)<cX.length&&(this.count=this.count-1,this.data[cW]=cY,true));},Item:function(cU){return this.get(cU);},GetEnumerator:function(){return bs.Get0(e.concat(W.GetFieldValues(this.data)));},Values:function(){return new cd.New(this);},get:function(cU){var cV,cW;cV=this;cW=this.data[this.hash(cU)];return cW==null?bJ.notPresent():e.pick(function(cX){var cY;cY=f.KeyValue(cX);return cV.equals.apply(null,[cY[0],cU])?{$:1,$0:cY[1]}:null;},cW);}},g,_5);_5.New$5=cR.Ctor(function(){_5.New$6.call(this,[],C.Equals,C.Hash);},_5);_5.New$6=cR.Ctor(function(cU,cV,cW){var cX,cY;g.New.call(this);this.equals=cV;this.hash=cW;this.count=0;this.data=[];cX=bs.Get(cU);try{while(cX.MoveNext()){cY=cX.Current();this.set(cY.K,cY.V);}}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}},_5);_7=_6.FSharpEvent=cR.Class({},g,_7);_7.New=cR.Ctor(function(){g.New.call(this);this.event=bF.New(cR.MarkResizable([]));},_7);_8.$cctor=function(){var cU;_8.$cctor=a.ignore;_8.defaultChartConfig=_1.New("Chart");_8.defaultSeriesChartConfig=_2.New("x","y",new w({$:0,$0:220,$1:220,$2:220,$3:0.2}),new w({$:0,$0:220,$1:220,$2:220,$3:1}),true);_8.defaultColorConfig=bG.New(new w({$:0,$0:220,$1:220,$2:220,$3:1}),new w({$:1,$0:"#fff"}),new w({$:0,$0:220,$1:220,$2:220,$3:1}),new w({$:1,$0:"#fff"}));_8.defaultPolarData=(cU=new bH.New(),function(cV){return function(cW){var cX,cY,cZ,c0;cX=(cY=cU.Next(0,256),(cZ=cU.Next(0,256),(c0=cU.Next(0,256),[new w({$:0,$0:cY,$1:cZ,$2:c0,$3:1}),new w({$:0,$0:cY,$1:cZ,$2:c0,$3:0.6})])));return bI.New(cW,cX[0],cX[1],cV);};});};_9.Map=function(cU,cV){var cW,cX;cW=cV.s;return cW!=null&&cW.$==0?_9.New({$:0,$0:cU(cW.$0)}):(cX=_9.New({$:3,$0:[],$1:[]}),(_9.When(cV,function(cY){_9.MarkDone(cX,cV,cU(cY));},cX),cX));};_9.WhenObsoleteRun=function(cU,cV){var cW;cW=cU.s;if(cW==null)cV();else cW!=null&&cW.$==2?cW.$1.push(cV):cW!=null&&cW.$==3?cW.$1.push(cV):void 0;};_9.When=function(cU,cV,cW){var cX;cX=cU.s;if(cX==null)_9.Obsolete(cW);else cX!=null&&cX.$==2?(_9.EnqueueSafe(cX.$1,cW),cV(cX.$0)):cX!=null&&cX.$==3?(cX.$0.push(cV),_9.EnqueueSafe(cX.$1,cW)):cV(cX.$0);};_9.MarkDone=function(cU,cV,cW){var cX;if(cX=cV.s,cX!=null&&cX.$==0)_9.MarkForever(cU,cW);else _9.MarkReady(cU,cW);};_9.EnqueueSafe=function(cU,cV){var cW,cX,cY,cZ;cU.push(cV);if(cU.length%20===0){cW=cU.slice(0);co.Clear(cU);for(cX=0,cY=e.length(cW)-1;cX<=cY;cX++){cZ=e.get(cW,cX);if(typeof cZ=="object")(function(c0){if(c0.s)cU.push(c0);}(cZ));else(function(c0){cU.push(c0);}(cZ));}}else void 0;};_9.MarkForever=function(cU,cV){var cW,cX,cY,cZ;cW=cU.s;if(cW!=null&&cW.$==3){cU.s={$:0,$0:cV};cX=cW.$0;for(cY=0,cZ=e.length(cX)-1;cY<=cZ;cY++)(e.get(cX,cY))(cV);}else void 0;};_9.MarkReady=function(cU,cV){var cW,cX,cY,cZ;cW=cU.s;if(cW!=null&&cW.$==3){cU.s={$:2,$0:cV,$1:cW.$1};cX=cW.$0;for(cY=0,cZ=e.length(cX)-1;cY<=cZ;cY++)(e.get(cX,cY))(cV);}else void 0;};_9.Join=function(cU){var cV;cV=_9.New({$:3,$0:[],$1:[]});_9.When(cU,function(cW){var cX;cX=cW();_9.When(cX,function(cY){var cZ,c0;if((cZ=cX.s,cZ!=null&&cZ.$==0)&&(c0=cU.s,c0!=null&&c0.$==0))_9.MarkForever(cV,cY);else _9.MarkReady(cV,cY);},cV);},cV);return cV;};_9.WhenRun=function(cU,cV,cW){var cX;cX=cU.s;if(cX==null)cW();else cX!=null&&cX.$==2?(cX.$1.push(cW),cV(cX.$0)):cX!=null&&cX.$==3?(cX.$0.push(cV),cX.$1.push(cW)):cV(cX.$0);};_9.Map3=function(cU,cV,cW,cX){var cY,cZ,c0,c1;function c2(c3){var c4,c5,c6,c7;if(!(c4=c1.s,c4!=null&&c4.$==0||c4!=null&&c4.$==2)){c5=_9.ValueAndForever(cV);c6=_9.ValueAndForever(cW);c7=_9.ValueAndForever(cX);if(c5!=null&&c5.$==1)c6!=null&&c6.$==1?c7!=null&&c7.$==1?c5.$0[1]&&c6.$0[1]&&c7.$0[1]?_9.MarkForever(c1,cU(c5.$0[0],c6.$0[0],c7.$0[0])):_9.MarkReady(c1,cU(c5.$0[0],c6.$0[0],c7.$0[0])):void 0:void 0;}}cY=cV.s;cZ=cW.s;c0=cX.s;return cY!=null&&cY.$==0?cZ!=null&&cZ.$==0?c0!=null&&c0.$==0?_9.New({$:0,$0:cU(cY.$0,cZ.$0,c0.$0)}):_9.Map3Opt1(cU,cY.$0,cZ.$0,cX):c0!=null&&c0.$==0?_9.Map3Opt2(cU,cY.$0,c0.$0,cW):_9.Map3Opt3(cU,cY.$0,cW,cX):cZ!=null&&cZ.$==0?c0!=null&&c0.$==0?_9.Map3Opt4(cU,cZ.$0,c0.$0,cV):_9.Map3Opt5(cU,cZ.$0,cV,cX):c0!=null&&c0.$==0?_9.Map3Opt6(cU,c0.$0,cV,cW):(c1=_9.New({$:3,$0:[],$1:[]}),(_9.When(cV,c2,c1),_9.When(cW,c2,c1),_9.When(cX,c2,c1),c1));};_9.Sequence=function(cU){var cV,cW,cX;function cY(cZ){var c0;if(cX[0]===0){c0=e.map(function(c1){var c2;c2=c1.s;return c2!=null&&c2.$==0?c2.$0:c2!=null&&c2.$==2?c2.$0:f.FailWith("value not found by View.Sequence");},cV);if(e.forall(function(c1){var c2;c2=c1.s;return c2!=null&&c2.$==0;},cV))_9.MarkForever(cW,c0);else _9.MarkReady(cW,c0);}else cX[0]=cX[0]-1;}cV=e.ofSeq(cU);return cV.length==0?_9.New({$:0,$0:[]}):(cW=_9.New({$:3,$0:[],$1:[]}),(cX=[e.length(cV)-1],(e.iter(function(cZ){_9.When(cZ,cY,cW);},cV),cW)));};_9.Map2=function(cU,cV,cW){var cX,cY,cZ;function c0(c1){var c2,c3,c4;if(!(c2=cZ.s,c2!=null&&c2.$==0||c2!=null&&c2.$==2)){c3=_9.ValueAndForever(cV);c4=_9.ValueAndForever(cW);if(c3!=null&&c3.$==1)c4!=null&&c4.$==1?c3.$0[1]&&c4.$0[1]?_9.MarkForever(cZ,cU(c3.$0[0],c4.$0[0])):_9.MarkReady(cZ,cU(c3.$0[0],c4.$0[0])):void 0;}}cX=cV.s;cY=cW.s;return cX!=null&&cX.$==0?cY!=null&&cY.$==0?_9.New({$:0,$0:cU(cX.$0,cY.$0)}):_9.Map2Opt1(cU,cX.$0,cW):cY!=null&&cY.$==0?_9.Map2Opt2(cU,cY.$0,cV):(cZ=_9.New({$:3,$0:[],$1:[]}),(_9.When(cV,c0,cZ),_9.When(cW,c0,cZ),cZ));};_9.Map2Unit=function(cU,cV){var cW,cX,cY;function cZ(){var c0,c1,c2;if(!(c0=cY.s,c0!=null&&c0.$==0||c0!=null&&c0.$==2)){c1=_9.ValueAndForever(cU);c2=_9.ValueAndForever(cV);if(c1!=null&&c1.$==1)c2!=null&&c2.$==1?c1.$0[1]&&c2.$0[1]?_9.MarkForever(cY,null):_9.MarkReady(cY,null):void 0;}}cW=cU.s;cX=cV.s;return cW!=null&&cW.$==0?cX!=null&&cX.$==0?_9.New({$:0,$0:null}):cV:cX!=null&&cX.$==0?cU:(cY=_9.New({$:3,$0:[],$1:[]}),(_9.When(cU,cZ,cY),_9.When(cV,cZ,cY),cY));};_9.Copy=function(cU){var cV,cW,cX;cV=cU.s;return cV==null?cU:cV!=null&&cV.$==2?(cW=_9.New({$:2,$0:cV.$0,$1:[]}),(_9.WhenObsolete(cU,cW),cW)):cV!=null&&cV.$==3?(cX=_9.New({$:3,$0:[],$1:[]}),(_9.When(cU,function(cY){_9.MarkDone(cX,cU,cY);},cX),cX)):cU;};_9.Map3Opt1=function(cU,cV,cW,cX){return _9.Map(function(cY){return cU(cV,cW,cY);},cX);};_9.Map3Opt2=function(cU,cV,cW,cX){return _9.Map(function(cY){return cU(cV,cY,cW);},cX);};_9.Map3Opt3=function(cU,cV,cW,cX){return _9.Map2(function(cY,cZ){return cU(cV,cY,cZ);},cW,cX);};_9.Map3Opt4=function(cU,cV,cW,cX){return _9.Map(function(cY){return cU(cY,cV,cW);},cX);};_9.Map3Opt5=function(cU,cV,cW,cX){return _9.Map2(function(cY,cZ){return cU(cY,cV,cZ);},cW,cX);};_9.Map3Opt6=function(cU,cV,cW,cX){return _9.Map2(function(cY,cZ){return cU(cY,cZ,cV);},cW,cX);};_9.ValueAndForever=function(cU){var cV;cV=cU.s;return cV!=null&&cV.$==0?{$:1,$0:[cV.$0,true]}:cV!=null&&cV.$==2?{$:1,$0:[cV.$0,false]}:null;};_9.Map2Opt1=function(cU,cV,cW){return _9.Map(function(cX){return cU(cV,cX);},cW);};_9.Map2Opt2=function(cU,cV,cW){return _9.Map(function(cX){return cU(cX,cV);},cW);};_9.WhenObsolete=function(cU,cV){var cW;cW=cU.s;if(cW==null)_9.Obsolete(cV);else cW!=null&&cW.$==2?_9.EnqueueSafe(cW.$1,cV):cW!=null&&cW.$==3?_9.EnqueueSafe(cW.$1,cV):void 0;};_=z.VarStr=cR.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(cU,cV){(cU(cV))(bp.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};}},m,_);_.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},_);$=z.EventQ=cR.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},m,$);$.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},$);ba.CreateEmbedNode=function(){return{Current:null,Dirty:false};};ba.UpdateEmbedNode=function(cU,cV){cU.Current=cV;cU.Dirty=true;};ba.CreateRunState=function(cU,cV){return cf.New(cg.get_Empty(),ba.CreateElemNode(cU,bQ.EmptyAttr(),cV));};ba.PerformAnimatedUpdate=function(cU,cV,cW){var cX;return bY.get_UseAnimations()?(cX=null,b6.Delay(function(){var cY,cZ,c0;cY=cg.FindAll(cW);cZ=ba.ComputeChangeAnim(cV,cY);c0=ba.ComputeEnterAnim(cV,cY);return b6.Bind(bY.Play(bY.Append(cZ,ba.ComputeExitAnim(cV,cY))),function(){return b6.Bind(ba.SyncElemNodesNextFrame(cU,cV),function(){return b6.Bind(bY.Play(c0),function(){cV.PreviousNodes=cY;return b6.Return(null);});});});})):ba.SyncElemNodesNextFrame(cU,cV);};ba.PerformSyncUpdate=function(cU,cV,cW){var cX;cX=cg.FindAll(cW);ba.SyncElemNode(cU,cV.Top);cV.PreviousNodes=cX;};ba.LinkPrevElement=function(cU,cV){ba.InsertDoc(cU.parentNode,cV,cU);};ba.CreateDelimitedRunState=function(cU,cV,cW){return cf.New(cg.get_Empty(),ba.CreateDelimitedElemNode(cU,cV,bQ.EmptyAttr(),cW));};ba.LinkElement=function(cU,cV){ba.InsertDoc(cU,cV,null);};ba.InsertBeforeDelim=function(cU,cV){var cW,cX;cW=cU.parentNode;cX=self.document.createTextNode("");cW.insertBefore(cX,cU);ba.LinkPrevElement(cU,cV);return cX;};ba.CreateElemNode=function(cU,cV,cW){var cX;ba.LinkElement(cU,cW);cX=bQ.Insert(cU,cV);return bU.New(cX,cW,null,cU,bL.Int(),cR.GetOptional(cX.OnAfterRender));};ba.SyncElemNodesNextFrame=function(cU,cV){function cW(cX){a.requestAnimationFrame(function(){ba.SyncElemNode(cU,cV.Top);cX();});}return bZ.BatchUpdatesEnabled()?b6.FromContinuations(function(cX,cY,cZ){return cW.apply(null,[cX,cY,cZ]);}):(ba.SyncElemNode(cU,cV.Top),b6.Return(null));};ba.ComputeExitAnim=function(cU,cV){return bY.Concat(e.map(function(cW){return bQ.GetExitAnim(cW.Attr);},cg.ToArray(cg.Except(cV,cg.Filter(function(cW){return bQ.HasExitAnim(cW.Attr);},cU.PreviousNodes)))));};ba.ComputeEnterAnim=function(cU,cV){return bY.Concat(e.map(function(cW){return bQ.GetEnterAnim(cW.Attr);},cg.ToArray(cg.Except(cU.PreviousNodes,cg.Filter(function(cW){return bQ.HasEnterAnim(cW.Attr);},cV)))));};ba.ComputeChangeAnim=function(cU,cV){var cW;function cX(cY){return bQ.HasChangeAnim(cY.Attr);}cW=function(cY){return cg.Filter(cX,cY);};return bY.Concat(e.map(function(cY){return bQ.GetChangeAnim(cY.Attr);},cg.ToArray(cg.Intersect(cW(cU.PreviousNodes),cW(cV)))));};ba.SyncElemNode=function(cU,cV){!cU?ba.SyncElement(cV):void 0;ba.Sync(cV.Children);ba.AfterRender(cV);};ba.InsertDoc=function(cU,cV,cW){var cX,cY,cZ;while(true)if(cV!=null&&cV.$==1)return ba.InsertNode(cU,cV.$0.El,cW);else if(cV!=null&&cV.$==2){cX=cV.$0;cX.Dirty=false;cV=cX.Current;}else if(cV==null)return cW;else if(cV!=null&&cV.$==4)return ba.InsertNode(cU,cV.$0.Text,cW);else if(cV!=null&&cV.$==5)return ba.InsertNode(cU,cV.$0,cW);else if(cV!=null&&cV.$==6)return e.foldBack(function(c0,c1){return(((cR.Curried3(function(c2,c3,c4){return c3==null||c3.constructor===N?ba.InsertDoc(c2,c3,c4):ba.InsertNode(c2,c3,c4);}))(cU))(c0))(c1);},cV.$0.Els,cW);else{cY=cV.$1;cZ=cV.$0;cV=cZ;cW=ba.InsertDoc(cU,cY,cW);}};ba.CreateDelimitedElemNode=function(cU,cV,cW,cX){var cY,cZ;cY=cU.parentNode;ba.LinkPrevElement(cV,cX);cZ=bQ.Insert(cY,cW);return bU.New(cZ,cX,{$:1,$0:[cU,cV]},cY,bL.Int(),cR.GetOptional(cZ.OnAfterRender));};ba.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};ba.UpdateTextNode=function(cU,cV){cU.Value=cV;cU.Dirty=true;};ba.SyncElement=function(cU){function cV(cW){function cX(cY){var cZ,c0,c1,c2;while(true){if(cY!=null&&cY.$==0){c0=cY.$1;c1=cY.$0;if(cX(c1))return true;else cY=c0;}else if(cY!=null&&cY.$==2){c2=cY.$0;if(c2.Dirty)return true;else cY=c2.Current;}else return cY!=null&&cY.$==6&&(cZ=cY.$0,cZ.Dirty||e.exists(cV,cZ.Holes));}}return cX(cW.Children);}bQ.Sync(cU.El,cU.Attr);if(cV(cU))ba.DoSyncElement(cU);};ba.Sync=function(cU){var cV,cW,cX,cY,cZ;while(true){if(cU!=null&&cU.$==1)return ba.SyncElemNode(false,cU.$0);else if(cU!=null&&cU.$==2){cX=cU.$0;cU=cX.Current;}else if(cU==null)return null;else if(cU!=null&&cU.$==5)return null;else if(cU!=null&&cU.$==4){cV=cU.$0;return cV.Dirty?(cV.Text.nodeValue=cV.Value,cV.Dirty=false):null;}else if(cU!=null&&cU.$==6){cW=cU.$0;e.iter(function(c0){ba.SyncElemNode(false,c0);},cW.Holes);e.iter(function(c0){bQ.Sync(c0[0],c0[1]);},cW.Attrs);return ba.AfterRender(cW);}else{cY=cU.$1;cZ=cU.$0;ba.Sync(cZ);cU=cY;}}};ba.AfterRender=function(cU){var cV;cV=cR.GetOptional(cU.Render);if(cV!=null&&cV.$==1){cV.$0(cU.El);cR.SetOptional(cU,"Render",null);}};ba.InsertNode=function(cU,cV,cW){bR.InsertAt(cU,cW,cV);return cV;};ba.DoSyncElement=function(cU){var cV,cW,cX;function cY(cZ,c0){var c1,c2,c3,c4;while(true){if(cZ!=null&&cZ.$==1)return cZ.$0.El;else if(cZ!=null&&cZ.$==2){c2=cZ.$0;if(c2.Dirty){c2.Dirty=false;return ba.InsertDoc(cV,c2.Current,c0);}else cZ=c2.Current;}else if(cZ==null)return c0;else if(cZ!=null&&cZ.$==4)return cZ.$0.Text;else if(cZ!=null&&cZ.$==5)return cZ.$0;else if(cZ!=null&&cZ.$==6){c1=cZ.$0;c1.Dirty?c1.Dirty=false:void 0;return e.foldBack(function(c5,c6){return c5==null||c5.constructor===N?cY(c5,c6):c5;},c1.Els,c0);}else{c3=cZ.$1;c4=cZ.$0;cZ=c4;c0=cY(c3,c0);}}}cV=cU.El;cI.Iter((cW=cU.El,function(cZ){bR.RemoveNode(cW,cZ);}),cI.Except(cI.DocChildren(cU),cI.Children(cU.El,cR.GetOptional(cU.Delimiters))));cY(cU.Children,(cX=cR.GetOptional(cU.Delimiters),cX!=null&&cX.$==1?cX.$0[1]:null));};bb=_4.HashSet=cR.Class({SAdd:function(cU){return this.add(cU);},Contains:function(cU){var cV;cV=this.data[this.hash(cU)];return cV==null?false:this.arrContains(cU,cV);},add:function(cU){var cV,cW;cV=this.hash(cU);cW=this.data[cV];return cW==null?(this.data[cV]=[cU],this.count=this.count+1,true):this.arrContains(cU,cW)?false:(cW.push(cU),this.count=this.count+1,true);},arrContains:function(cU,cV){var cW,cX,cY,cZ;cW=true;cX=0;cZ=cV.length;while(cW&&cX<cZ)if(this.equals.apply(null,[cV[cX],cU]))cW=false;else cX=cX+1;return!cW;},GetEnumerator:function(){return bs.Get(cp.concat(this.data));},ExceptWith:function(cU){var cV;cV=bs.Get(cU);try{while(cV.MoveNext())this.Remove(cV.Current());}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}},Count:function(){return this.count;},IntersectWith:function(cU){var cV,cW,cX,cY,cZ;cV=new bb.New$4(cU,this.equals,this.hash);cW=cp.concat(this.data);for(cX=0,cY=cW.length-1;cX<=cY;cX++){cZ=cW[cX];if(!cV.Contains(cZ))this.Remove(cZ);}},Remove:function(cU){var cV;cV=this.data[this.hash(cU)];return cV==null?false:this.arrRemove(cU,cV)&&(this.count=this.count-1,true);},CopyTo:function(cU,cV){var cW,cX,cY;cW=cp.concat(this.data);for(cX=0,cY=cW.length-1;cX<=cY;cX++)e.set(cU,cX+cV,cW[cX]);},arrRemove:function(cU,cV){var cW,cX,cY,cZ;cW=true;cX=0;cZ=cV.length;while(cW&&cX<cZ)if(this.equals.apply(null,[cV[cX],cU])){cV.splice.apply(cV,[cX,1]);cW=false;}else cX=cX+1;return!cW;}},g,bb);bb.New$3=cR.Ctor(function(){bb.New$4.call(this,[],C.Equals,C.Hash);},bb);bb.New$4=cR.Ctor(function(cU,cV,cW){var cX;g.New.call(this);this.equals=cV;this.hash=cW;this.data=[];this.count=0;cX=bs.Get(cU);try{while(cX.MoveNext())this.add(cX.Current());}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}},bb);bb.New$2=cR.Ctor(function(cU){bb.New$4.call(this,cU,C.Equals,C.Hash);},bb);bc.$cctor=function(){bc.$cctor=a.ignore;bc.initialized=new _5.New$5();};bc=k.TemplateInitializer=cR.Class({},g,bc);bc.GetOrAddHoleFor=function(cU,cV,cW){var cX,cY,cZ,c0;bc.$cctor();cX=bc.GetHolesFor(cU);cY=(cZ=null,[cX.TryGetValue(cV,{get:function(){return cZ;},set:function(c1){cZ=c1;}}),cZ]);return cY[0]?cY[1]:(c0=cW(),(cX.set_Item(cV,c0),c0));};bc.GetHolesFor=function(cU){var cV,cW,cX;bc.$cctor();cV=(cW=null,[bc.initialized.TryGetValue(cU,{get:function(){return cW;},set:function(cY){cW=cY;}}),cW]);return cV[0]?cV[1]:(cX=new _5.New$5(),(bc.initialized.set_Item(cU,cX),cX));};bd=z.VarFloatUnchecked=cR.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cU,cV){(cU(cV))(bp.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};}},m,bd);bd.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},bd);be=z.VarBool=cR.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cU,cV){(cU(cV))(bp.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};}},m,be);be.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},be);bf=z.VarDateTime=cR.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:x.Map(function(cU){return(new a.Date(cU)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(cU,cV){(cU(cV))(bp.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:x.Map(function(cU){return(new a.Date(cU)).toLocaleString();},this.fillWith.get_View())};}},m,bf);bf.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},bf);bg=z.VarFile=cR.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cU,cV){(cU(cV))(bp.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:x.Map(a.String,this.fillWith.get_View())};}},m,bg);bg.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},bg);bh=z.VarDomElement=cR.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},m,bh);bh.New=cR.Ctor(function(cU,cV){m.New.call(this);this.name=cU;this.fillWith=cV;},bh);bi=h.ConcreteVar=cR.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(cU){if(this.isConst)(function(cV){return cV("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cV){cS.log(cV);}));else{_9.Obsolete(this.snap);this.current=cU;this.snap=_9.New({$:2,$0:cU,$1:[]});}},SetFinal:function(cU){if(this.isConst)(function(cV){return cV("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cV){cS.log(cV);}));else{_9.Obsolete(this.snap);this.isConst=true;this.current=cU;this.snap=_9.New({$:0,$0:cU});}},UpdateMaybe:function(cU){var cV;cV=cU(this.Get());if(cV!=null&&cV.$==1)this.Set(cV.$0);}},n,bi);bi.New=cR.Ctor(function(cU,cV,cW){var cX;cX=this;n.New.call(this);this.isConst=cU;this.current=cW;this.snap=cV;this.view=function(){return cX.snap;};this.id=bL.Int();},bi);bk.JSUnion=function(cU,cV){var cW;function cX(c1){var c2;function c3(c4){return c4!=null&&c4.$==1&&C.Equals(c1,c4.$0);}c2=Z.tryFindIndex(function(c4){return c3(c4[0]);},cV);return c2!=null&&c2.$==1?c2.$0:c1.$;}function cY(c1,c2){return e.init(e.length((e.get(cV,c1))[2]),function(c3){return c2["$"+a.String(c3)];});}function cZ(c1,c2){var c3,c4,c5;c3=cU==null?{}:new cU();c4=e.get(cV,c1);return(c5=c4[0],c5!=null&&c5.$==1)?c4[0].$0:(c3.$=c1,Z.iteri(function(c6,c7){c3["$"+a.String(c6)]=c7;},c2),c3);}function c0(c1,c2){var c3;function c4(c5,c6){return[c1,c5,c6,c3];}c3=c2[2];return Z.map(function(c5){return c4(c5[0],c5[1]);},c2[1]);}cW=e.ofSeq(Z.collect(function(c1){return c0(c1[0],c1[1]);},Z.indexed(cV)));return bN.New$1(function(c1){function c2(c3,c4,c5,c6){var c7,c8,c9;function c_(c$){return function(da){return function(db){var dc;function dd(de,df){return((c_(dc))(de))(new bC({$:1,$0:df,$1:db}));}return c$.$==1?(dc=c$.$1,Z.collect(function(de){return dd(de[0],de[1]);},c$.$0.Parse(da))):[[da,cZ(c3,e.ofList(bB.rev(db)))]];};};}return bk.isCorrectMethod(c4,c1.Method)?(c7=bO.startsWith(bB.ofArray(c5),c1.Segments),c7==null?[]:(c8=c7.$0,(c9=bB.ofArray(c6),c9.$==0?[[bm.New(c8,c1.QueryArgs,c1.FormData,c1.Method,c1.Body),cZ(c3,[])]]:((c_(c9))(bm.New(c8,c1.QueryArgs,c1.FormData,c1.Method,c1.Body)))(bC.Empty)))):[];}return Z.collect(function(c3){return c2(c3[0],c3[1],c3[2],c3[3]);},cW);},function(c1){var c2,c3,c4,c5,c6,c7;function c8(c9,c_){return c_.Write(c9);}c2=cX(c1);c3=e.get(cV,c2);c4=c3[2];c5=e.get(c3[1],0);c6=[bm.Segment(bB.ofArray(c5[1]),c5[0])];return c4.length==0?{$:1,$0:c6}:(c7=(((cR.Curried3(e.map2))(c8))(cY(c2,c1)))(c4),e.forall(function(c9){return c9!=null;},c7)?{$:1,$0:Z.append(c6,Z.collect(function(c9){return c9.$0;},c7))}:null);});};bk.isCorrectMethod=function(cU,cV){return cV!=null&&cV.$==1?cU!=null&&cU.$==1?C.Equals(cV.$0,cU.$0):true:!(cU!=null&&cU.$==1);};bl.Parse=function(cU,cV){function cW(cX,cY){return cX.Segments.$==0?{$:1,$0:cY}:null;}return Z.tryPick(function(cX){return cW(cX[0],cX[1]);},cU.Parse(cV));};bl.HashLink=function(cU,cV){return"#"+bl.Link(cU,cV);};bl.Link=function(cU,cV){var cW;cW=bl.Write(cU,cV);return cW==null?"":cW.$0.ToLink();};bl.Write=function(cU,cV){var cW;cW=cU.Write(cV);return cW==null?null:{$:1,$0:bm.Combine(cW.$0)};};bm=bj.Route=cR.Class({ToLink:function(){return cu.WriteLink(this.Segments,this.QueryArgs);}},null,bm);bm.FromHash=function(cU,cV){var cW,cX;cW=cU.indexOf("#");return cW===-1?bm.get_Empty():(cX=cU.substring(cW+1),cV!=null&&cV.$0?cX==""||cX=="/"?bm.get_Empty():b4.StartsWith(cX,"/")?bm.FromUrl(cX.substring(1),{$:1,$0:true}):bm.Segment$2(cX):bm.FromUrl(cU.substring(cW),{$:1,$0:false}));};bm.Segment=function(cU,cV){var cW;cW=bm.get_Empty();return bm.New(cU,cW.QueryArgs,cW.FormData,cV,cW.Body);};bm.get_Empty=function(){return bm.New(bC.Empty,new b2.New([]),new b2.New([]),null,{$:1,$0:null});};bm.FromUrl=function(cU,cV){var cW,cX,cY;cW=(cX=cU.indexOf("?"),cX===-1?[cU,new b2.New([])]:[b4.Substring(cU,0,cX),bm.ParseQuery(cU.substring(cX+1))]);cY=bm.get_Empty();return bm.New(bB.ofArray(b4.SplitChars(cW[0],["/"],cV!=null&&cV.$0?0:1)),cW[1],cY.FormData,cY.Method,cY.Body);};bm.Segment$2=function(cU){var cV;cV=bm.get_Empty();return bm.New(bB.ofArray([cU]),cV.QueryArgs,cV.FormData,cV.Method,cV.Body);};bm.ParseQuery=function(cU){return b3.OfArray(e.ofSeq(e.choose(function(cV){var cW,cX;cW=b4.SplitChars(cV,["="],0);return!C.Equals(cW,null)&&cW.length===2?(cX=e.get(cW,1),{$:1,$0:[e.get(cW,0),cX]}):((function(cY){return function(cZ){return cY("wrong format for query argument: "+b5.toSafe(cZ));};}(function(cY){cS.log(cY);}))(cV),null);},b4.SplitChars(cU,["&"],0))));};bm.Combine=function(cU){var cV,cW,cX,cY,cZ,c0,c1;cV=e.ofSeq(cU);cW=e.length(cV);return cW===0?bm.get_Empty():cW===1?e.get(cV,0):(cX=null,cY=null,cZ=[],c0=new b2.New([]),c1=new b2.New([]),e.iter(function(c2){var c3,c4;c3=c2.Method;if(c3!=null&&c3.$==1)cX=c3;c4=c2.Body;if(c4==null);else cY=c4;c0=b3.FoldBack(function(c5,c6,c7){return c7.Add$1(c5,c6);},c0,c2.QueryArgs);c1=b3.FoldBack(function(c5,c6,c7){return c7.Add$1(c5,c6);},c1,c2.FormData);bB.iter(function(c5){cZ.push(c5);},c2.Segments);},cV),bm.New(bB.ofSeq(cZ),c0,c1,cX,cY));};bm.New=function(cU,cV,cW,cX,cY){return new bm({Segments:cU,QueryArgs:cV,FormData:cW,Method:cX,Body:cY});};bo=bn.attr=cR.Class({},g,bo);bp.Style=function(cU,cV){return bQ.Static(function(cW){cW.style.setProperty(cU,cV);});};bp.OnAfterRender=function(cU){return new bP({$:4,$0:cU});};bp.Handler=function(cU,cV){return bQ.Static(function(cW){cW.addEventListener(cU,function(cX){return(cV(cW))(cX);},false);});};bp.Dynamic=function(cU,cV){return bQ.Dynamic(cV,function(cW){return function(cX){return cW.setAttribute(cU,cX);};});};bp.Value=function(cU){return bp.ValueWith(cE.StringApply(),cU);};bp.FloatValueUnchecked=function(cU){return bp.ValueWith(cE.FloatApplyUnchecked(),cU);};bp.Checked=function(cU){return bp.ValueWith(cE.BoolCheckedApply(),cU);};bp.DateTimeValue=function(cU){return bp.ValueWith(cE.DateTimeApplyUnchecked(),cU);};bp.FileValue=function(cU){return bp.ValueWith(cE.FileApplyUnchecked(),cU);};bp.ValueWith=function(cU,cV){var cW;cW=cU(cV);return bP.Append(bQ.Static(cW[0]),bp.DynamicCustom(cW[1],cW[2]));};bp.DynamicCustom=function(cU,cV){return bQ.Dynamic(cV,cU);};bs.Get=function(cU){return cU instanceof a.Array?bs.ArrayEnumerator(cU):C.Equals(typeof cU,"string")?bs.StringEnumerator(cU):cU.GetEnumerator();};bs.ArrayEnumerator=function(cU){return new bt.New(0,null,function(cV){var cW;cW=cV.s;return cW<e.length(cU)&&(cV.c=e.get(cU,cW),cV.s=cW+1,true);},void 0);};bs.StringEnumerator=function(cU){return new bt.New(0,null,function(cV){var cW;cW=cV.s;return cW<cU.length&&(cV.c=cU[cW],cV.s=cW+1,true);},void 0);};bs.Get0=function(cU){return cU instanceof a.Array?bs.ArrayEnumerator(cU):C.Equals(typeof cU,"string")?bs.StringEnumerator(cU):"GetEnumerator0"in cU?cU.GetEnumerator0():cU.GetEnumerator();};bt=bs.T=cR.Class({MoveNext:function(){var cU;cU=this.n(this);this.e=cU?1:2;return cU;},Current:function(){return this.e===1?this.c:this.e===0?f.FailWith("Enumeration has not started. Call MoveNext."):f.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},g,bt);bt.New=cR.Ctor(function(cU,cV,cW,cX){g.New.call(this);this.s=cU;this.c=cV;this.n=cW;this.d=cX;this.e=0;},bt);bu.fold=function(cU,cV,cW){return cW==null?cV:cU(cV,cW.$0);};bu.ofObj=function(cU){return cU==null?null:{$:1,$0:cU};};bv.array=function(cU,cV,cW){var cX,cY;return cV==null?cW!=null&&cW.$==1?(cX=cW.$0,cX<0?[]:cU.slice(0,cX+1)):[]:cW==null?cU.slice(cV.$0):(cY=cW.$0,cY<0?[]:cU.slice(cV.$0,cY+1));};bv.string=function(cU,cV,cW){var cX,cY;return cV==null?cW!=null&&cW.$==1?(cX=cW.$0,cX<0?"":cU.slice(0,cX+1)):"":cW==null?cU.slice(cV.$0):(cY=cW.$0,cY<0?"":cU.slice(cV.$0,cY+1));};bw=G.BatchUpdater=cR.Class({Update:function(cU){var cV,cW;function cX(){cV.handle[0]=null;cV.count[0]=0;cU();}cV=this;cW=this.handle[0];if(cW==null);else a.clearTimeout(cW.$0);if(this.count[0]<this.maxCount){this.count[0]++;this.handle[0]={$:1,$0:a.setTimeout(cX,this.interval)};}else cX();}},g,bw);bw.New=cR.Ctor(function(cU,cV){g.New.call(this);this.interval=cU==null?75:cU.$0;this.maxCount=cV==null?10:cV.$0;this.handle=[null];this.count=[0];},bw);bx.observer=function(cU){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:cU};};by.headOption=function(cU){return Z.isEmpty(cU)?null:{$:1,$0:Z.nth(0,cU)};};bz.Select=function(cU,cV){return bz.New(function(cW){return cU.Subscribe(bx.observer(function(cX){cW.OnNext(cV(cX));}));});};bz.New=function(cU){return{Subscribe:cU};};bz.Return=function(cU){return bz.New(function(cV){cV.OnNext(cU);cV.OnCompleted();return bz.NewDisposable(a.ignore);});};bz.CombineLast=function(cU,cV,cW){return bz.New(function(cX){var cY,cZ,c0,c1,c2,c3;function c4(){if(cY.length>0&&cZ.length>0)cX.OnNext(cW(cY.shift(),cZ.shift()));}cY=[];cZ=[];c0=bz.NewObserver(function(c5){cY.push(c5);c4();},a.ignore);c1=bz.NewObserver(function(c5){cZ.push(c5);c4();},a.ignore);c2=cU.Subscribe(c0);c3=cV.Subscribe(c1);return bz.NewDisposable(function(){c2.Dispose();c3.Dispose();});});};bz.NewDisposable=function(cU){return{Dispose:function(){return cU();}};};bz.NewObserver=function(cU,cV){return{OnNext:cU,OnCompleted:function(){return cV();},OnError:function(){return null;}};};bA.SequenceOnlyNew=function(cU){var cV;cV=bB.ofSeq(cU);return cV.$==1?bA.sequence(bz.Select(cV.$0,function(cW){return[cW];}),cV.$1):bz.Return([]);};bA.sequence=function(cU,cV){var cW,cX;while(true)if(cV.$==1){cW=cV.$1;cX=cV.$0;cU=(function(cY,cZ){return function(c0){return bz.CombineLast(cY,cZ,function(c1,c2){return(c0(c1))(c2);});};}(cU,cX))(function(cY){return function(cZ){return Z.append(cY,[cZ]);};});cV=cW;}else return cU;};bC=bB.T=cR.Class({GetEnumerator:function(){return new bt.New(this,null,function(cU){var cV;cV=cU.s;return cV.$==0?false:(cU.c=cV.$0,cU.s=cV.$1,true);},void 0);}},null,bC);bC.Empty=new bC({$:0});bB.ofArray=function(cU){var cV,cW,cX;cV=bC.Empty;for(cW=e.length(cU)-1,cX=0;cW>=cX;cW--)cV=new bC({$:1,$0:e.get(cU,cW),$1:cV});return cV;};bB.rev=function(cU){var cV,cW;cV=bC.Empty;cW=cU;while(cW.$==1){cV=new bC({$:1,$0:cW.$0,$1:cV});cW=cW.$1;}return cV;};bB.ofSeq=function(cU){var cV,cW,cX,cY,cZ,c0;if(cU instanceof bC)return cU;else if(cU instanceof a.Array)return bB.ofArray(cU);else{cV=bs.Get(cU);try{cX=cV.MoveNext();if(!cX)cW=bC.Empty;else{cZ=new bC({$:1});cY=cZ;while(cX){cY.$0=cV.Current();if(cV.MoveNext())cY=(c0=new bC({$:1}),cY.$1=c0,c0);else cX=false;}cY.$1=bC.Empty;cW=cZ;}return cW;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}}};bB.head=function(cU){return cU.$==1?cU.$0:bB.listEmpty();};bB.tail=function(cU){return cU.$==1?cU.$1:bB.listEmpty();};bB.listEmpty=function(){return f.FailWith("The input list was empty.");};bB.iter=function(cU,cV){var cW;cW=cV;while(cW.$==1){cU(bB.head(cW));cW=bB.tail(cW);}};bD.$cctor=function(){bD.$cctor=a.ignore;bD.LoadedTemplates=new _5.New$5();bD.LocalTemplatesLoaded=false;bD.GlobalHoles=new _5.New$5();bD.TextHoleRE="\\${([^}]+)}";bD.RenderedFullDocTemplate=null;};bF=bE.Event=cR.Class({Subscribe$1:function(cU){var cV;function cW(cY,cZ){return cU.OnNext(cZ);}function cX(){cV.RemoveHandler$1(cW);}cV=this;this.AddHandler$1(cW);return{Dispose:function(){return cX();}};},AddHandler$1:function(cU){this.Handlers.push(cU);},RemoveHandler$1:function(cU){var cV,cW;cV=Z.tryFindIndex(function(cX){return C.Equals(cU,cX);},this.Handlers);if(cV==null);else{cW=this.Handlers;cW.splice.apply(cW,[cV.$0,1]);}},Dispose:a.ignore,Subscribe:function(cU){return this.Subscribe$1(cU);}},null,bF);bF.New=function(cU){return new bF({Handlers:cU});};bG.New=function(cU,cV,cW,cX){return{PointColor:cU,PointHighlightFill:cV,PointHighlightStroke:cW,PointStrokeColor:cX};};bH=d.Random=cR.Class({Next:function(cU,cV){return cU>cV?f.FailWith("'minValue' cannot be greater than maxValue."):cU+cQ.floor(cQ.random()*(cV-cU));}},g,bH);bH.New=cR.Ctor(function(){g.New.call(this);},bH);bI.New=function(cU,cV,cW,cX){return{Value:cU,Color:cV,Highlight:cW,Label:cX};};_9.Obsolete=function(cU){var cV,cW,cX,cY,cZ;cW=cU.s;if(cW==null||(cW!=null&&cW.$==2?(cV=cW.$1,false):cW!=null&&cW.$==3?(cV=cW.$1,false):true))void 0;else{cU.s=null;for(cX=0,cY=e.length(cV)-1;cX<=cY;cX++){cZ=e.get(cV,cX);if(typeof cZ=="object")(function(c0){_9.Obsolete(c0);}(cZ));else cZ();}}};_9.New=function(cU){return{s:cU};};bJ.notPresent=function(){throw new cw.New();};bL.Int=function(){bL.set_counter(bL.counter()+1);return bL.counter();};bL.set_counter=function(cU){cj.$cctor();cj.counter=cU;};bL.counter=function(){cj.$cctor();return cj.counter;};bM.InMemory=function(cU){return new b1.New(cU);};bN.New$1=function(cU,cV){return{Parse:cU,Write:cV};};bO.startsWith=function(cU,cV){var cW;switch(cU.$==1?cV.$==1?C.Equals(cU.$0,cV.$0)?(cW=[cV.$0,cV.$1,cU.$0,cU.$1],1):2:2:0){case 0:return{$:1,$0:cV};case 1:return bO.startsWith(cW[3],cW[1]);case 2:return null;}};bP=h.AttrProxy=cR.Class({},null,bP);bP.Create=function(cU,cV){return bQ.Static(function(cW){cW.setAttribute(cU,cV);});};bP.Handler=function(cU,cV){return bP.HandlerImpl(cU,cV);};bP.Concat=function(cU){var cV;cV=cb.ofSeqNonCopying(cU);return cb.TreeReduce(bQ.EmptyAttr(),bP.Append,cV);};bP.HandlerImpl=function(cU,cV){return bQ.Static(function(cW){cW.addEventListener(cU,function(cX){return(cV(cW))(cX);},false);});};bP.Append=function(cU,cV){return bQ.AppendTree(cU,cV);};bQ.Static=function(cU){return new bP({$:3,$0:cU});};bQ.Insert=function(cU,cV){var cW,cX,cY;function cZ(c0){var c1,c2;while(true)if(!(c0===null)){if(c0!=null&&c0.$==1)return cW.push(c0.$0);else if(c0!=null&&c0.$==2){c1=c0.$1;c2=c0.$0;cZ(c2);c0=c1;}else return c0!=null&&c0.$==3?c0.$0(cU):c0!=null&&c0.$==4?cX.push(c0.$0):null;}else return null;}cW=[];cX=[];cZ(cV);cY=cW.slice(0);return b8.New(cU,bQ.Flags(cV),cY,cX.length===0?null:{$:1,$0:function(c0){Z.iter(function(c1){c1(c0);},cX);}});};bQ.Updates=function(cU){return cb.MapTreeReduce(function(cV){return cV.NChanged();},x.Const(),x.Map2Unit,cU.DynNodes);};bQ.Empty=function(cU){return b8.New(cU,0,[],null);};bQ.Flags=function(cU){return cU!==null&&cU.hasOwnProperty("flags")?cU.flags:0;};bQ.Dynamic=function(cU,cV){return new bP({$:1,$0:new cx.New(cU,cV)});};bQ.EmptyAttr=function(){cy.$cctor();return cy.EmptyAttr;};bQ.HasExitAnim=function(cU){var cV;cV=2;return(cU.DynFlags&cV)===cV;};bQ.GetExitAnim=function(cU){return bQ.GetAnim(cU,function(cV,cW){return cV.NGetExitAnim(cW);});};bQ.HasEnterAnim=function(cU){var cV;cV=1;return(cU.DynFlags&cV)===cV;};bQ.GetEnterAnim=function(cU){return bQ.GetAnim(cU,function(cV,cW){return cV.NGetEnterAnim(cW);});};bQ.HasChangeAnim=function(cU){var cV;cV=4;return(cU.DynFlags&cV)===cV;};bQ.GetChangeAnim=function(cU){return bQ.GetAnim(cU,function(cV,cW){return cV.NGetChangeAnim(cW);});};bQ.AppendTree=function(cU,cV){var cW;return cU===null?cV:cV===null?cU:(cW=new bP({$:2,$0:cU,$1:cV}),(bQ.SetFlags(cW,bQ.Flags(cU)|bQ.Flags(cV)),cW));};bQ.GetAnim=function(cU,cV){return bY.Concat(e.map(function(cW){return cV(cW,cU.DynElem);},cU.DynNodes));};bQ.Sync=function(cU,cV){e.iter(function(cW){cW.NSync(cU);},cV.DynNodes);};bQ.SetFlags=function(cU,cV){cU.flags=cV;};bR.ParseHTMLIntoFakeRoot=function(cU){var cV,cW,cX,cY,cZ;function c0(c1,c2){var c3;while(true)if(c2===0)return c1;else{c3=c2;c1=c1.lastChild;c2=c3-1;}}cV=self.document.createElement("div");return!bR.rhtml().test(cU)?(cV.appendChild(self.document.createTextNode(cU)),cV):(cW=(cX=bR.rtagName().exec(cU),C.Equals(cX,null)?"":e.get(cX,1).toLowerCase()),(cY=(cZ=(bR.wrapMap())[cW],cZ?cZ:bR.defaultWrap()),(cV.innerHTML=cY[1]+cU.replace(bR.rxhtmlTag(),"<$1></$2>")+cY[2],c0(cV,cY[0]))));};bR.rhtml=function(){cn.$cctor();return cn.rhtml;};bR.wrapMap=function(){cn.$cctor();return cn.wrapMap;};bR.defaultWrap=function(){cn.$cctor();return cn.defaultWrap;};bR.rxhtmlTag=function(){cn.$cctor();return cn.rxhtmlTag;};bR.rtagName=function(){cn.$cctor();return cn.rtagName;};bR.IterSelector=function(cU,cV,cW){var cX,cY,cZ;cX=cU.querySelectorAll(cV);for(cY=0,cZ=cX.length-1;cY<=cZ;cY++)cW(cX[cY]);};bR.ChildrenArray=function(cU){var cV,cW,cX;cV=[];for(cW=0,cX=cU.childNodes.length-1;cW<=cX;cW++)cV.push(cU.childNodes[cW]);return cV;};bR.IterSelectorDoc=function(cU,cV){var cW,cX,cY;cW=self.document.querySelectorAll(cU);for(cX=0,cY=cW.length-1;cX<=cY;cX++)cV(cW[cX]);};bR.InsertAt=function(cU,cV,cW){var cX;if(!(cW.parentNode===cU&&cV===(cX=cW.nextSibling,C.Equals(cX,null)?null:cX)))cU.insertBefore(cW,cV);};bR.RemoveNode=function(cU,cV){if(cV.parentNode===cU)cU.removeChild(cV);};bS.convertTextNode=function(cU){var cV,cW,cX,cY,cZ,c0;cV=null;cW=0;cY=cU.textContent;cZ=new a.RegExp(I.TextHoleRE(),"g");while(cV=cZ.exec(cY),cV!==null){cU.parentNode.insertBefore(self.document.createTextNode(bv.string(cY,{$:1,$0:cW},{$:1,$0:cZ.lastIndex-e.get(cV,0).length-1})),cU);cW=cZ.lastIndex;c0=self.document.createElement("span");c0.setAttribute("ws-replace",e.get(cV,1).toLowerCase());cU.parentNode.insertBefore(c0,cU);}cZ.lastIndex=0;cU.textContent=bv.string(cY,{$:1,$0:cW},null);};bS.failNotLoaded=function(cU){cS.warn("Instantiating non-loaded template",cU);};bS.fillTextHole=function(cU,cV,cW){var cX;cX=cU.querySelector("[ws-replace]");return C.Equals(cX,null)?(cS.warn("Filling non-existent text hole",cW),null):(cX.parentNode.replaceChild(self.document.createTextNode(cV),cX),{$:1,$0:cX.getAttribute("ws-replace")});};bS.removeHolesExcept=function(cU,cV){function cW(cX){I.foreachNotPreserved(cU,"["+cX+"]",function(cY){if(!cV.Contains(cY.getAttribute(cX)))cY.removeAttribute(cX);});}cW("ws-attr");cW("ws-onafterrender");cW("ws-var");I.foreachNotPreserved(cU,"[ws-hole]",function(cX){if(!cV.Contains(cX.getAttribute("ws-hole"))){cX.removeAttribute("ws-hole");while(cX.hasChildNodes())cX.removeChild(cX.lastChild);}});I.foreachNotPreserved(cU,"[ws-replace]",function(cX){if(!cV.Contains(cX.getAttribute("ws-replace")))cX.parentNode.removeChild(cX);});I.foreachNotPreserved(cU,"[ws-on]",function(cX){cX.setAttribute("ws-on",b4.concat(" ",e.filter(function(cY){return cV.Contains(e.get(b4.SplitChars(cY,[":"],1),1));},b4.SplitChars(cX.getAttribute("ws-on"),[" "],1))));});I.foreachNotPreserved(cU,"[ws-attr-holes]",function(cX){var cY,cZ,c0,c1,c2;cY=b4.SplitChars(cX.getAttribute("ws-attr-holes"),[" "],1);for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++){c1=e.get(cY,cZ);cX.setAttribute(c1,(c2=new a.RegExp(I.TextHoleRE(),"g"),cX.getAttribute(c1).replace(c2,function(c3,c4){return cV.Contains(c4)?c3:"";})));}});};bS.fillInstanceAttrs=function(cU,cV){var cW,cX,cY,cZ,c0;bS.convertAttrs(cV);cW=cV.nodeName.toLowerCase();cX=cU.querySelector("[ws-attr="+cW+"]");if(C.Equals(cX,null))cS.warn("Filling non-existent attr hole",cW);else{cX.removeAttribute("ws-attr");for(cY=0,cZ=cV.attributes.length-1;cY<=cZ;cY++){c0=cV.attributes.item(cY);if(c0.name=="class"&&cX.hasAttribute("class"))cX.setAttribute("class",cX.getAttribute("class")+" "+c0.nodeValue);else cX.setAttribute(c0.name,c0.nodeValue);}}};bS.mapHoles=function(cU,cV){function cW(cX){I.foreachNotPreserved(cU,"["+cX+"]",function(cY){var cZ,c0;cZ=(c0=null,[cV.TryGetValue(cY.getAttribute(cX).toLowerCase(),{get:function(){return c0;},set:function(c1){c0=c1;}}),c0]);if(cZ[0])cY.setAttribute(cX,cZ[1]);});}cW("ws-hole");cW("ws-replace");cW("ws-attr");cW("ws-onafterrender");cW("ws-var");I.foreachNotPreserved(cU,"[ws-on]",function(cX){cX.setAttribute("ws-on",b4.concat(" ",e.map(function(cY){var cZ,c0,c1;cZ=b4.SplitChars(cY,[":"],1);c0=(c1=null,[cV.TryGetValue(e.get(cZ,1),{get:function(){return c1;},set:function(c2){c1=c2;}}),c1]);return c0[0]?e.get(cZ,0)+":"+c0[1]:cY;},b4.SplitChars(cX.getAttribute("ws-on"),[" "],1))));});I.foreachNotPreserved(cU,"[ws-attr-holes]",function(cX){var cY,cZ,c0;cY=b4.SplitChars(cX.getAttribute("ws-attr-holes"),[" "],1);for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)(function(){var c1;function c2(c3,c4){var c5;c5=f.KeyValue(c4);return c3.replace(new a.RegExp("\\${"+c5[0]+"}","ig"),"${"+c5[1]+"}");}c1=e.get(cY,cZ);return cX.setAttribute(c1,(((cR.Curried3(Z.fold))(c2))(cX.getAttribute(c1)))(cV));}());});};bS.fill=function(cU,cV,cW){while(true)if(cU.hasChildNodes())cW=cV.insertBefore(cU.lastChild,cW);else return null;};bS.convertAttrs=function(cU){var cW,cX,cY,cZ,c0,c1,c2,c3;function cV(c4){var c5;c5=cU.getAttribute(c4);if(c5==null);else cU.setAttribute(c4,c5.toLowerCase());}cW=cU.attributes;cX=[];cY=[];cZ=[];for(c0=0,c1=cW.length-1;c0<=c1;c0++){c2=cW.item(c0);if(b4.StartsWith(c2.nodeName,"ws-on")&&c2.nodeName!="ws-onafterrender"&&c2.nodeName!="ws-on"){cX.push(c2.nodeName);cY.push(bv.string(c2.nodeName,{$:1,$0:"ws-on".length},null)+":"+c2.nodeValue.toLowerCase());}else!b4.StartsWith(c2.nodeName,"ws-")&&(new a.RegExp(I.TextHoleRE())).test(c2.nodeValue)?(c2.nodeValue=(c3=new a.RegExp(I.TextHoleRE(),"g"),c2.nodeValue.replace(c3,function(c4,c5){return"${"+c5.toLowerCase()+"}";})),cZ.push(c2.nodeName)):void 0;}if(!(cY.length==0))cU.setAttribute("ws-on",b4.concat(" ",cY));if(!(cZ.length==0))cU.setAttribute("ws-attr-holes",b4.concat(" ",cZ));cV("ws-hole");cV("ws-replace");cV("ws-attr");cV("ws-onafterrender");cV("ws-var");e.iter(function(c4){cU.removeAttribute(c4);},cX);};Z.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};Z.nonNegative=function(){return f.FailWith("The input must be non-negative.");};e.mapiInPlace=function(cU,cV){var cW,cX;for(cW=0,cX=cV.length-1;cW<=cX;cW++)cV[cW]=cU(cW,cV[cW]);return cV;};e.mapInPlace=function(cU,cV){var cW,cX;for(cW=0,cX=cV.length-1;cW<=cX;cW++)cV[cW]=cU(cV[cW]);};bT=_4.KeyCollection=cR.Class({GetEnumerator:function(){return bs.Get(Z.map(function(cU){return cU.K;},this.d));}},g,bT);bT.New=cR.Ctor(function(cU){g.New.call(this);this.d=cU;},bT);bU=h.DocElemNode=cR.Class({Equals:function(cU){return this.ElKey===cU.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bU);bU.New=function(cU,cV,cW,cX,cY,cZ){var c0;return new bU((c0={Attr:cU,Children:cV,El:cX,ElKey:cY},(cR.SetOptional(c0,"Delimiters",cW),cR.SetOptional(c0,"Render",cZ),c0)));};bX=h.Elt=cR.Class({},J,bX);bX.TreeNode=function(cU,cV){var cW,cX;function cY(cZ,c0){return bQ.Updates(c0);}cW=cc.Create(cV);return new bX.New$1({$:6,$0:cU},x.Map2Unit((cX=e.map(function(cZ){return cY(cZ[0],cZ[1]);},cU.Attrs),cb.TreeReduce(x.Const(),x.Map2Unit,cX)),cW.v),e.get(cU.Els,0),cW);};bX.New=function(cU,cV,cW){var cX,cY;cX=ba.CreateElemNode(cU,cV,cW.docNode);cY=cc.Create(cW.updates);return new bX.New$1({$:1,$0:cX},x.Map2Unit(bQ.Updates(cX.Attr),cY.v),cU,cY);};bX.New$1=cR.Ctor(function(cU,cV,cW,cX){J.New.call(this,cU,cV);this.docNode$1=cU;this.updates$1=cV;this.elt=cW;this.rvUpdates=cX;},bX);bY.get_UseAnimations=function(){return ch.UseAnimations();};bY.Play=function(cU){var cV;cV=null;return b6.Delay(function(){return b6.Bind(bY.Run(a.ignore,ch.Actions(cU)),function(){ch.Finalize(cU);return b6.Return(null);});});};bY.Append=function(cU,cV){return{$:0,$0:cr.Append(cU.$0,cV.$0)};};bY.Run=function(cU,cV){var cW;function cX(cY){function cZ(c0){return function(c1){var c2;c2=c1-c0;cV.Compute(c2);cU();return c2<=cW?void a.requestAnimationFrame(function(c3){(cZ(c0))(c3);}):cY();};}a.requestAnimationFrame(function(c0){(cZ(c0))(c0);});}cW=cV.Duration;return cW===0?b6.Zero():b6.FromContinuations(function(cY,cZ,c0){return cX.apply(null,[cY,cZ,c0]);});};bY.Concat=function(cU){return{$:0,$0:cr.Concat(Z.map(ch.List,cU))};};bY.get_Empty=function(){return{$:0,$0:cr.Empty()};};bZ.BatchUpdatesEnabled=function(){ci.$cctor();return ci.BatchUpdatesEnabled;};b0.StartProcessor=function(cU){var cV;function cW(){var cX;cX=null;return b6.Delay(function(){return b6.Bind(cU,function(){var cY;cY=cV[0];return C.Equals(cY,1)?(cV[0]=0,b6.Zero()):C.Equals(cY,2)?(cV[0]=1,cW()):b6.Zero();});});}cV=[0];return function(){var cX;cX=cV[0];if(C.Equals(cX,0)){cV[0]=1;b6.Start(cW(),null);}else C.Equals(cX,1)?cV[0]=2:void 0;};};b1=bM.ArrayStorage=cR.Class({SSetAt:function(cU,cV,cW){e.set(cW,cU,cV);return cW;},SAppend:function(cU,cV){cV.push(cU);return cV;},SInit:function(){return this.init;}},g,b1);b1.New=cR.Ctor(function(cU){g.New.call(this);this.init=cU;},b1);b2=_4.FSharpMap=cR.Class({Equals:function(cU){return this.Count()===cU.Count()&&Z.forall2(C.Equals,this,cU);},GetEnumerator:function(){return bs.Get(Z.map(function(cU){return{K:cU.Key,V:cU.Value};},ck.Enumerate(false,this.tree)));},Count:function(){var cU;cU=this.tree;return cU==null?0:cU.Count;},GetHashCode:function(){return C.Hash(e.ofSeq(this));},Add$1:function(cU,cV){return new b2.New$1(ck.Add(cm.New(cU,cV),this.tree));},get_IsEmpty:function(){return this.tree==null;},get_Tree:function(){return this.tree;},CompareTo0:function(cU){return Z.compareWith(C.Compare,this,cU);}},g,b2);b2.New=cR.Ctor(function(cU){b2.New$1.call(this,cs.fromSeq(cU));},b2);b2.New$1=cR.Ctor(function(cU){g.New.call(this);this.tree=cU;},b2);b3.OfArray=function(cU){return new b2.New$1(ck.OfSeq(Z.map(function(cV){return cm.New(cV[0],cV[1]);},cU)));};b3.FoldBack=function(cU,cV,cW){return Z.fold(function(cX,cY){return cU(cY.Key,cY.Value,cX);},cW,ck.Enumerate(true,cV.get_Tree()));};b3.ToSeq=function(cU){return Z.map(function(cV){return[cV.Key,cV.Value];},ck.Enumerate(false,cU.get_Tree()));};b4.StartsWith=function(cU,cV){return cU.substring(0,cV.length)==cV;};b4.concat=function(cU,cV){return e.ofSeq(cV).join(cU);};b4.SplitChars=function(cU,cV,cW){return b4.Split(cU,new a.RegExp("["+b4.RegexEscape(cV.join(""))+"]"),cW);};b4.Substring=function(cU,cV,cW){return cU.substr(cV,cW);};b4.Split=function(cU,cV,cW){return cW===1?e.filter(function(cX){return cX!=="";},b4.SplitWith(cU,cV)):b4.SplitWith(cU,cV);};b4.RegexEscape=function(cU){return cU.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};b4.SplitWith=function(cU,cV){return cU.split(cV);};b4.forall=function(cU,cV){return Z.forall(cU,b4.protect(cV));};b4.IsNullOrEmpty=function(cU){return cU==null||cU=="";};b4.Join=function(cU,cV){return cV.join(cU);};b4.protect=function(cU){return cU==null?"":cU;};b5.toSafe=function(cU){return cU==null?"":cU;};b6.Delay=function(cU){return function(cV){try{(cU(null))(cV);}catch(cW){cV.k({$:1,$0:cW});}};};b6.Bind=function(cU,cV){return b6.checkCancel(function(cW){cU(cA.New(function(cX){var cY;if(cX.$==0){cY=cX.$0;b6.scheduler().Fork(function(){try{(cV(cY))(cW);}catch(cZ){cW.k({$:1,$0:cZ});}});}else b6.scheduler().Fork(function(){cW.k(cX);});},cW.ct));});};b6.Zero=function(){cB.$cctor();return cB.Zero;};b6.Start=function(cU,cV){var cW,cX;cW=(cX=(b6.defCTS())[0],cV==null?cX:cV.$0);b6.scheduler().Fork(function(){if(!cW.c)cU(cA.New(function(cY){if(cY.$==1)b6.UncaughtAsyncError(cY.$0);},cW));});};b6.Return=function(cU){return function(cV){cV.k({$:0,$0:cU});};};b6.scheduler=function(){cB.$cctor();return cB.scheduler;};b6.checkCancel=function(cU){return function(cV){if(cV.ct.c)b6.cancel(cV);else cU(cV);};};b6.defCTS=function(){cB.$cctor();return cB.defCTS;};b6.UncaughtAsyncError=function(cU){cS.log("WebSharper: Uncaught asynchronous exception",cU);};b6.FromContinuations=function(cU){return function(cV){var cW;function cX(cY){if(cW[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cW[0]=true;b6.scheduler().Fork(cY);}}cW=[false];cU(function(cY){cX(function(){cV.k({$:0,$0:cY});});},function(cY){cX(function(){cV.k({$:1,$0:cY});});},function(cY){cX(function(){cV.k({$:2,$0:cY});});});};};b6.cancel=function(cU){cU.k({$:2,$0:new cL.New(cU.ct)});};b8.New=function(cU,cV,cW,cX){var cY;cY={DynElem:cU,DynFlags:cV,DynNodes:cW};cR.SetOptional(cY,"OnAfterRender",cX);return cY;};b9=z.Attribute=cR.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,b9);b_=z.Event=cR.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,b_);b$=z.AfterRender=cR.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,b$);ca=z.AfterRenderQ=cR.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},m,ca);cb.TreeReduce=function(cU,cV,cW){var cX;function cY(cZ){return function(c0){var c1,c2;switch(c0<=0?0:c0===1?cZ>=0&&cZ<cX?1:(c1=c0,2):(c1=c0,2)){case 0:return cU;case 1:return e.get(cW,cZ);case 2:c2=c0/2>>0;return cV((cY(cZ))(c2),(cY(cZ+c2))(c0-c2));}};}cX=e.length(cW);return(cY(0))(cX);};cb.mapInPlace=function(cU,cV){var cW,cX;for(cW=0,cX=cV.length-1;cW<=cX;cW++)cV[cW]=cU(cV[cW]);return cV;};cb.ofSeqNonCopying=function(cU){var cV,cW;if(cU instanceof a.Array)return cU;else if(cU instanceof bC)return e.ofList(cU);else if(cU===null)return[];else{cV=[];cW=bs.Get(cU);try{while(cW.MoveNext())cV.push(cW.Current());return cV;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}}};cb.MapTreeReduce=function(cU,cV,cW,cX){var cY;function cZ(c0){return function(c1){var c2,c3;switch(c1<=0?0:c1===1?c0>=0&&c0<cY?1:(c2=c1,2):(c2=c1,2)){case 0:return cV;case 1:return cU(e.get(cX,c0));case 2:c3=c1/2>>0;return cW((cZ(c0))(c3),(cZ(c0+c3))(c1-c3));}};}cY=e.length(cX);return(cZ(0))(cY);};cc=h.Updates=cR.Class({},null,cc);cc.Create=function(cU){var cV;cV=null;cV=cc.New(cU,null,function(){var cW;cW=cV.s;return cW===null?(cW=_9.Copy(cV.c()),cV.s=cW,_9.WhenObsoleteRun(cW,function(){cV.s=null;}),cW):cW;});return cV;};cc.New=function(cU,cV,cW){return new cc({c:cU,s:cV,v:cW});};cd=_4.ValueCollection=cR.Class({GetEnumerator:function(){return bs.Get(Z.map(function(cU){return cU.V;},this.d));}},g,cd);cd.New=cR.Ctor(function(cU){g.New.call(this);this.d=cU;},cd);cf.New=function(cU,cV){return{PreviousNodes:cU,Top:cV};};cg.get_Empty=function(){return{$:0,$0:new bb.New$3()};};cg.FindAll=function(cU){var cV;function cW(cZ,c0){var c1,c2,c3,c4,c5;while(true)switch(cZ){case 0:if(c0!=null&&c0.$==0){c2=c0.$1;c3=c0.$0;cW(0,c3);c0=c2;}else if(c0!=null&&c0.$==1){c4=c0.$0;c0=c4;cZ=1;}else if(c0!=null&&c0.$==2){c5=c0.$0;c0=c5.Current;}else return c0!=null&&c0.$==6?(c1=c0.$0.Holes,(function(c6){return function(c7){e.iter(c6,c7);};}(cY))(c1)):null;break;case 1:cV.push(c0);c0=c0.Children;cZ=0;break;}}function cX(cZ){return cW(0,cZ);}function cY(cZ){return cW(1,cZ);}cV=[];cX(cU);return{$:0,$0:new bb.New$2(cV)};};cg.Filter=function(cU,cV){return{$:0,$0:cD.Filter(cU,cV.$0)};};cg.Except=function(cU,cV){return{$:0,$0:cD.Except(cU.$0,cV.$0)};};cg.ToArray=function(cU){return cD.ToArray(cU.$0);};cg.Intersect=function(cU,cV){return{$:0,$0:cD.Intersect(cU.$0,cV.$0)};};ch.UseAnimations=function(){cq.$cctor();return cq.UseAnimations;};ch.Actions=function(cU){return ch.ConcatActions(e.choose(function(cV){return cV.$==1?{$:1,$0:cV.$0}:null;},cr.ToArray(cU.$0)));};ch.Finalize=function(cU){e.iter(function(cV){if(cV.$==0)cV.$0();},cr.ToArray(cU.$0));};ch.ConcatActions=function(cU){var cV,cW,cX,cY;cV=cb.ofSeqNonCopying(cU);cW=e.length(cV);return cW===0?ch.Const():cW===1?e.get(cV,0):(cX=Z.max(Z.map(function(cZ){return cZ.Duration;},cV)),(cY=e.map(function(cZ){return ch.Prolong(cX,cZ);},cV),ch.Def(cX,function(cZ){e.iter(function(c0){c0.Compute(cZ);},cY);})));};ch.List=function(cU){return cU.$0;};ch.Const=function(cU){return ch.Def(0,function(){return cU;});};ch.Def=function(cU,cV){return{Compute:cV,Duration:cU};};ch.Prolong=function(cU,cV){var cW,cX,cY;cW=cV.Compute;cX=cV.Duration;cY=cM.Create(function(){return cV.Compute(cV.Duration);});return{Compute:function(cZ){return cZ>=cX?cY.f():cW(cZ);},Duration:cU};};ci.$cctor=function(){ci.$cctor=a.ignore;ci.BatchUpdatesEnabled=true;};cj.$cctor=function(){cj.$cctor=a.ignore;cj.counter=0;};cl.New=function(cU,cV,cW,cX,cY){return{Node:cU,Left:cV,Right:cW,Height:cX,Count:cY};};cm=_4.Pair=cR.Class({Equals:function(cU){return C.Equals(this.Key,cU.Key);},GetHashCode:function(){return C.Hash(this.Key);},CompareTo0:function(cU){return C.Compare(this.Key,cU.Key);}},null,cm);cm.New=function(cU,cV){return new cm({Key:cU,Value:cV});};cn.$cctor=function(){var cU;cn.$cctor=a.ignore;cn.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");cn.rtagName=new a.RegExp("<([\\w:]+)");cn.rhtml=new a.RegExp("<|&#?\\w+;");cn.wrapMap=(cU=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:cU,tbody:cU,tfoot:cU,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});cn.defaultWrap=[0,"",""];};co.Clear=function(cU){cU.splice(0,e.length(cU));};cp.concat=function(cU){var cV,cW;cV=[];for(var cX in cU)cV.push.apply(cV,cU[cX]);return cV;};cq.$cctor=function(){cq.$cctor=a.ignore;cq.CubicInOut=cz.Custom(function(cU){var cV;cV=cU*cU;return 3*cV-2*(cV*cU);});cq.UseAnimations=true;};cr.Append=function(cU,cV){return cU.$==0?cV:cV.$==0?cU:{$:2,$0:cU,$1:cV};};cr.ToArray=function(cU){var cV;function cW(cX){var cY,cZ;while(true)if(cX.$==1)return cV.push(cX.$0);else if(cX.$==2){cY=cX.$1;cZ=cX.$0;cW(cZ);cX=cY;}else return cX.$==3?e.iter(function(c0){cV.push(c0);},cX.$0):null;}cV=[];cW(cU);return cV.slice(0);};cr.Concat=function(cU){var cV;cV=cb.ofSeqNonCopying(cU);return cb.TreeReduce(cr.Empty(),cr.Append,cV);};cr.Empty=function(){cN.$cctor();return cN.Empty;};cs.fromSeq=function(cU){var cV;cV=e.ofSeq(Z.map(function(cW){return cm.New(cW[0],cW[1]);},Z.distinctBy(function(cW){return cW[0];},Z.rev(cU))));e.sortInPlace(cV);return ck.Build(cV,0,cV.length-1);};ct=b6.Scheduler=cR.Class({Fork:function(cU){var cV;cV=this;this.robin.push(cU);if(this.idle){this.idle=false;a.setTimeout(function(){cV.tick();},0);}},tick:function(){var cU,cV,cW;cV=this;cW=cT.now();cU=true;while(cU)if(this.robin.length===0){this.idle=true;cU=false;}else{(this.robin.shift())();cT.now()-cW>40?(a.setTimeout(function(){cV.tick();},0),cU=false):void 0;}}},g,ct);ct.New=cR.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},ct);cu.WriteLink=function(cU,cV){var cW;cW=cV.get_IsEmpty()?"":"?"+cu.WriteQuery(cV);return"/"+cu.Concat(cU)+cW;};cu.Concat=function(cU){var cV,cW;cV=[];cW=true;bB.iter(function(cX){if(!b4.IsNullOrEmpty(cX)){cW?cW=false:cV.push("/");cV.push(cX);}},cU);return b4.Join("",e.ofSeq(cV));};cu.WriteQuery=function(cU){function cV(cW,cX){return cW+"="+cX;}return b4.concat("&",Z.map(function(cW){return cV(cW[0],cW[1]);},b3.ToSeq(cU)));};cw=d.KeyNotFoundException=cR.Class({},cv,cw);cw.New=cR.Ctor(function(){cw.New$1.call(this,"The given key was not present in the dictionary.");},cw);cw.New$1=cR.Ctor(function(cU){this.message=cU;N.setPrototypeOf(this,cw.prototype);},cw);ck.OfSeq=function(cU){var cV;cV=e.ofSeq(Z.distinct(cU));e.sortInPlace(cV);return ck.Build(cV,0,cV.length-1);};ck.Enumerate=function(cU,cV){function cW(cX,cY){var cZ;while(true)if(cX==null)return cY.$==1?{$:1,$0:[cY.$0[0],[cY.$0[1],cY.$1]]}:null;else if(cU){cZ=cX;cX=cZ.Right;cY=new bC({$:1,$0:[cZ.Node,cZ.Left],$1:cY});}else{cZ=cX;cX=cZ.Left;cY=new bC({$:1,$0:[cZ.Node,cZ.Right],$1:cY});}}return Z.unfold(function(cX){return cW(cX[0],cX[1]);},[cV,bC.Empty]);};ck.Build=function(cU,cV,cW){var cX,cY,cZ;return cW-cV+1<=0?null:(cX=(cV+cW)/2>>0,(cY=ck.Build(cU,cV,cX-1),(cZ=ck.Build(cU,cX+1,cW),ck.Branch(e.get(cU,cX),cY,cZ))));};ck.Branch=function(cU,cV,cW){var cX,cY;return cl.New(cU,cV,cW,1+(cX=cV==null?0:cV.Height,(cY=cW==null?0:cW.Height,C.Compare(cX,cY)===1?cX:cY)),1+(cV==null?0:cV.Count)+(cW==null?0:cW.Count));};ck.Add=function(cU,cV){return ck.Put(function(cW,cX){return cX;},cU,cV);};ck.Put=function(cU,cV,cW){var cX,cY;cX=ck.Lookup(cV,cW);cY=cX[0];return cY==null?ck.Rebuild(cX[1],ck.Branch(cV,null,null)):ck.Rebuild(cX[1],ck.Branch(cU(cY.Node,cV),cY.Left,cY.Right));};ck.Lookup=function(cU,cV){var cW,cX,cY,cZ;cW=[];cX=cV;cY=true;while(cY)if(cX==null)cY=false;else{cZ=C.Compare(cU,cX.Node);if(cZ===0)cY=false;else cZ===1?(cW.unshift([true,cX.Node,cX.Left]),cX=cX.Right):(cW.unshift([false,cX.Node,cX.Right]),cX=cX.Left);}return[cX,cW];};ck.Rebuild=function(cU,cV){var cW,cY,cZ,c0,c1,c2,c3,c4,c5,c6;function cX(c7){return c7==null?0:c7.Height;}cW=cV;for(cY=0,cZ=e.length(cU)-1;cY<=cZ;cY++){cW=(c0=e.get(cU,cY),c0[0]?(c1=c0[1],(c2=c0[2],cX(cW)>cX(c2)+1?cX(cW.Left)===cX(cW.Right)+1?(c3=cW.Left,ck.Branch(c3.Node,ck.Branch(c1,c2,c3.Left),ck.Branch(cW.Node,c3.Right,cW.Right))):ck.Branch(cW.Node,ck.Branch(c1,c2,cW.Left),cW.Right):ck.Branch(c1,c2,cW))):(c4=c0[1],(c5=c0[2],cX(cW)>cX(c5)+1?cX(cW.Right)===cX(cW.Left)+1?(c6=cW.Right,ck.Branch(c6.Node,ck.Branch(cW.Node,cW.Left,c6.Left),ck.Branch(c4,c6.Right,c5))):ck.Branch(cW.Node,cW.Left,ck.Branch(c4,cW.Right,c5)):ck.Branch(c4,cW,c5))));}return cW;};cx=h.DynamicAttrNode=cR.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cU){return bY.get_Empty();},NGetEnterAnim:function(cU){return bY.get_Empty();},NGetChangeAnim:function(cU){return bY.get_Empty();},NSync:function(cU){if(this.dirty){(this.push(cU))(this.value);this.dirty=false;}}},g,cx);cx.New=cR.Ctor(function(cU,cV){var cW;cW=this;g.New.call(this);this.push=cV;this.value=void 0;this.dirty=false;this.updates=x.Map(function(cX){cW.value=cX;cW.dirty=true;},cU);},cx);cy.$cctor=function(){var cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7;cy.$cctor=a.ignore;cy.EmptyAttr=null;cy.BoolCheckedApply=function(c8){function c9(c_,c$){return c$!=null&&c$.$==1?void(c_.checked=c$.$0):null;}return[function(c_){c_.addEventListener("change",function(){return c8.Get()!=c_.checked?c8.Set(c_.checked):null;});},function(c_){return function(c$){return c9(c_,c$);};},x.Map(function(c_){return{$:1,$0:c_};},c8.get_View())];};cy.StringSet=function(c8){return function(c9){c8.value=c9;};};cy.StringGet=function(c8){return{$:1,$0:c8.value};};cy.StringApply=(cU=cE.StringGet(),(cV=cE.StringSet(),function(c8){return cE.ApplyValue(cU,cV,c8);}));cy.DateTimeSetUnchecked=function(c8){return function(c9){c8.value=(new cT(c9)).toLocaleString();};};cy.DateTimeGetUnchecked=function(c8){var c9,c_,c$,da;c9=c8.value;return cF.isBlank(c9)?{$:1,$0:-8640000000000000}:(c_=(c$=0,[(da=cK.TryParse(c9),da!=null&&da.$==1&&(c$=da.$0,true)),c$]),c_[0]?{$:1,$0:c_[1]}:null);};cy.DateTimeApplyUnchecked=(cW=cE.DateTimeGetUnchecked(),(cX=cE.DateTimeSetUnchecked(),function(c8){return cE.ApplyValue(cW,cX,c8);}));cy.FileSetUnchecked=function(){return function(){return null;};};cy.FileGetUnchecked=function(c8){var c9;c9=c8.files;return{$:1,$0:e.ofSeq(Z.delay(function(){return Z.map(function(c_){return c9.item(c_);},f.range(0,c9.length-1));}))};};cy.FileApplyUnchecked=(cY=cE.FileGetUnchecked(),(cZ=cE.FileSetUnchecked(),function(c8){return cE.FileApplyValue(cY,cZ,c8);}));cy.IntSetUnchecked=function(c8){return function(c9){c8.value=a.String(c9);};};cy.IntGetUnchecked=function(c8){var c9,c_;c9=c8.value;return cF.isBlank(c9)?{$:1,$0:0}:(c_=+c9,c_!==c_>>0?null:{$:1,$0:c_});};cy.IntApplyUnchecked=(c0=cE.IntGetUnchecked(),(c1=cE.IntSetUnchecked(),function(c8){return cE.ApplyValue(c0,c1,c8);}));cy.IntSetChecked=function(c8){return function(c9){var c_;c_=c9.get_Input();return c8.value!=c_?void(c8.value=c_):null;};};cy.IntGetChecked=function(c8){var c9,c_,c$;c9=c8.value;return{$:1,$0:cF.isBlank(c9)?(c8.checkValidity?c8.checkValidity():true)?new cG({$:2,$0:c9}):new cG({$:1,$0:c9}):(c_=(c$=0,[O.TryParseInt32(c9,{get:function(){return c$;},set:function(da){c$=da;}}),c$]),c_[0]?new cG({$:0,$0:c_[1],$1:c9}):new cG({$:1,$0:c9}))};};cy.IntApplyChecked=(c2=cE.IntGetChecked(),(c3=cE.IntSetChecked(),function(c8){return cE.ApplyValue(c2,c3,c8);}));cy.FloatSetUnchecked=function(c8){return function(c9){c8.value=a.String(c9);};};cy.FloatGetUnchecked=function(c8){var c9,c_;c9=c8.value;return cF.isBlank(c9)?{$:1,$0:0}:(c_=+c9,a.isNaN(c_)?null:{$:1,$0:c_});};cy.FloatApplyUnchecked=(c4=cE.FloatGetUnchecked(),(c5=cE.FloatSetUnchecked(),function(c8){return cE.ApplyValue(c4,c5,c8);}));cy.FloatSetChecked=function(c8){return function(c9){var c_;c_=c9.get_Input();return c8.value!=c_?void(c8.value=c_):null;};};cy.FloatGetChecked=function(c8){var c9,c_;c9=c8.value;return{$:1,$0:cF.isBlank(c9)?(c8.checkValidity?c8.checkValidity():true)?new cG({$:2,$0:c9}):new cG({$:1,$0:c9}):(c_=+c9,a.isNaN(c_)?new cG({$:1,$0:c9}):new cG({$:0,$0:c_,$1:c9}))};};cy.FloatApplyChecked=(c6=cE.FloatGetChecked(),(c7=cE.FloatSetChecked(),function(c8){return cE.ApplyValue(c6,c7,c8);}));};cz=h.Easing=cR.Class({},g,cz);cz.Custom=function(cU){return new cz.New(cU);};cz.New=cR.Ctor(function(cU){g.New.call(this);this.transformTime=cU;},cz);cA.New=function(cU,cV){return{k:cU,ct:cV};};cB.$cctor=function(){cB.$cctor=a.ignore;cB.noneCT=cC.New(false,[]);cB.scheduler=new ct.New();cB.defCTS=[new cH.New()];cB.Zero=b6.Return();cB.GetCT=function(cU){cU.k({$:0,$0:cU.ct});};};cC.New=function(cU,cV){return{c:cU,r:cV};};cD.Filter=function(cU,cV){return new bb.New$2(e.filter(cU,cD.ToArray(cV)));};cD.Except=function(cU,cV){var cW;cW=new bb.New$2(cD.ToArray(cV));cW.ExceptWith(cD.ToArray(cU));return cW;};cD.ToArray=function(cU){var cV;cV=e.create(cU.Count(),void 0);cU.CopyTo(cV,0);return cV;};cD.Intersect=function(cU,cV){var cW;cW=new bb.New$2(cD.ToArray(cU));cW.IntersectWith(cD.ToArray(cV));return cW;};cE.ApplyValue=function(cU,cV,cW){var cX;function cY(cZ,c0){return c0==null?null:cZ(c0.$0);}cX=null;return[function(cZ){function c0(){cW.UpdateMaybe(function(c1){var c2;cX=cU(cZ);return cX!=null&&cX.$==1&&(!C.Equals(cX.$0,c1)&&(c2=[cX,cX.$0],true))?c2[0]:null;});}cZ.addEventListener("change",c0);cZ.addEventListener("input",c0);cZ.addEventListener("keypress",c0);},function(cZ){var c0;c0=cV(cZ);return function(c1){return cY(c0,c1);};},x.Map(function(cZ){var c0;return cX!=null&&cX.$==1&&(C.Equals(cX.$0,cZ)&&(c0=cX.$0,true))?null:{$:1,$0:cZ};},cW.get_View())];};cE.StringSet=function(){cy.$cctor();return cy.StringSet;};cE.StringGet=function(){cy.$cctor();return cy.StringGet;};cE.DateTimeSetUnchecked=function(){cy.$cctor();return cy.DateTimeSetUnchecked;};cE.DateTimeGetUnchecked=function(){cy.$cctor();return cy.DateTimeGetUnchecked;};cE.FileApplyValue=function(cU,cV,cW){var cX;function cY(cZ,c0){return c0==null?null:cZ(c0.$0);}cX=null;return[function(cZ){cZ.addEventListener("change",function(){cW.UpdateMaybe(function(c0){var c1;cX=cU(cZ);return cX!=null&&cX.$==1&&(cX.$0!==c0&&(c1=[cX,cX.$0],true))?c1[0]:null;});});},function(cZ){var c0;c0=cV(cZ);return function(c1){return cY(c0,c1);};},x.Map(function(cZ){var c0;return cX!=null&&cX.$==1&&(C.Equals(cX.$0,cZ)&&(c0=cX.$0,true))?null:{$:1,$0:cZ};},cW.get_View())];};cE.FileSetUnchecked=function(){cy.$cctor();return cy.FileSetUnchecked;};cE.FileGetUnchecked=function(){cy.$cctor();return cy.FileGetUnchecked;};cE.IntSetUnchecked=function(){cy.$cctor();return cy.IntSetUnchecked;};cE.IntGetUnchecked=function(){cy.$cctor();return cy.IntGetUnchecked;};cE.IntSetChecked=function(){cy.$cctor();return cy.IntSetChecked;};cE.IntGetChecked=function(){cy.$cctor();return cy.IntGetChecked;};cE.FloatSetUnchecked=function(){cy.$cctor();return cy.FloatSetUnchecked;};cE.FloatGetUnchecked=function(){cy.$cctor();return cy.FloatGetUnchecked;};cE.FloatSetChecked=function(){cy.$cctor();return cy.FloatSetChecked;};cE.FloatGetChecked=function(){cy.$cctor();return cy.FloatGetChecked;};cE.StringApply=function(){cy.$cctor();return cy.StringApply;};cE.FloatApplyUnchecked=function(){cy.$cctor();return cy.FloatApplyUnchecked;};cE.BoolCheckedApply=function(){cy.$cctor();return cy.BoolCheckedApply;};cE.DateTimeApplyUnchecked=function(){cy.$cctor();return cy.DateTimeApplyUnchecked;};cE.FileApplyUnchecked=function(){cy.$cctor();return cy.FileApplyUnchecked;};cF.isBlank=function(cU){return b4.forall(cJ.IsWhiteSpace,cU);};cG=h.CheckedInput=cR.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cG);cH=d.CancellationTokenSource=cR.Class({},g,cH);cH.New=cR.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},cH);cI.Children=function(cU,cV){var cW,cX,cY;if(cV!=null&&cV.$==1){cY=[];cW=cV.$0[0].nextSibling;while(cW!==cV.$0[1]){cY.push(cW);cW=cW.nextSibling;}return{$:0,$0:cY};}else return{$:0,$0:e.init(cU.childNodes.length,(cX=cU.childNodes,function(cZ){return cX[cZ];}))};};cI.Except=function(cU,cV){var cW;cW=cU.$0;return{$:0,$0:e.filter(function(cX){return e.forall(function(cY){return!(cX===cY);},cW);},cV.$0)};};cI.Iter=function(cU,cV){e.iter(cU,cV.$0);};cI.DocChildren=function(cU){var cV;function cW(cX){var cY,cZ,c0,c1;while(true){if(cX!=null&&cX.$==2){cZ=cX.$0;cX=cZ.Current;}else if(cX!=null&&cX.$==1)return cV.push(cX.$0.El);else if(cX==null)return null;else if(cX!=null&&cX.$==5)return cV.push(cX.$0);else if(cX!=null&&cX.$==4)return cV.push(cX.$0.Text);else if(cX!=null&&cX.$==6){cY=cX.$0.Els;return(function(c2){return function(c3){e.iter(c2,c3);};}(function(c2){if(c2==null||c2.constructor===N)cW(c2);else cV.push(c2);}))(cY);}else{c0=cX.$1;c1=cX.$0;cW(c1);cX=c0;}}}cV=[];cW(cU.Children);return{$:0,$0:cb.ofSeqNonCopying(cV)};};cJ.IsWhiteSpace=function(cU){return cU.match(new a.RegExp("\\s"))!==null;};cK.TryParse=function(cU){var cV;cV=cT.parse(cU);return a.isNaN(cV)?null:{$:1,$0:cV};};O.TryParse=function(cU,cV,cW,cX){var cY,cZ;cY=+cU;cZ=cY===cY-cY%1&&cY>=cV&&cY<=cW;if(cZ)cX.set(cY);return cZ;};cL=d.OperationCanceledException=cR.Class({},cv,cL);cL.New=cR.Ctor(function(cU){cL.New$1.call(this,"The operation was canceled.",null,cU);},cL);cL.New$1=cR.Ctor(function(cU,cV,cW){this.message=cU;this.inner=cV;N.setPrototypeOf(this,cL.prototype);this.ct=cW;},cL);cM.Create=function(cU){return cP.New(false,cU,cM.forceLazy);};cM.forceLazy=function(){var cU;cU=this.v();this.c=true;this.v=cU;this.f=cM.cachedLazy;return cU;};cM.cachedLazy=function(){return this.v;};cN.$cctor=function(){cN.$cctor=a.ignore;cN.Empty={$:0};};cP.New=function(cU,cV,cW){return{c:cU,v:cV,f:cW};};cR.OnLoad(function(){c.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
